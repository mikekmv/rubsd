$RuOBSD$
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

HideProc
~~~~~~~~

    Не помню уже кому эта хрень когда-то понадобилась,  но она появилась
по просьбам трудящихся.  Хрень предназначена  для  запрещения  просмотра
процессам/пользователям   просмотра   чужих   процессов  с в озможностью
управления правами. Вся эта пакость состоит  из LKM  модуля и  программы
управления им.


Сборка и установка:
~~~~~~~~~~~~~~~~~~~

# make depend
# make
# make install

Если  модуль  планируется  использовать  в системе,  собраной  с  опцией
NO_PROPOLICE, модуль следует собирать командой "make NO_PROPOLICE=Yes".

Загрузка модуля (kernel securelevel должен быть меньше 1):

# modload /usr/lkm/hideproc.o

Выгрузка модуля (kernel securelevel должен быть меньше 1):

# modunload -n hideproc


Управление:
~~~~~~~~~~~

hideprocctl [-DENSV] [[!]group

-D	- запретить работу модуля
-E	- разрешить работу модуля
-N	- прятать системные процессы и init
-S	- показывать системные процессы и init
-V	- напечатать версию программы и устройства (хотя  вряд-ли  когда
	  появится другая ;)

group	- имя  или  GID группы  для  которой разрешен (запрещен,  если в
	  начале стоит '!') просмотр чужих процессов.

    Если  не  указан ни один  параметр,  программа распечатывает текущее
состояние  модуля.  Проверка группы осуществляется по всему списку групп
процесса, запросившего информацию  о  процессах.  Сразу  после  загрузки
модуль  разрешает  просмотр  чужих  процессов  только  для членов группы
wheel (0). Все остальные группы могут видеть только свои процессы.

    Независимо от настроек,  пользователь  root  (0)  может  видеть  все
процессы.


Примеры:
~~~~~~~~

# hideprocctl operator
	- только  члены группы operator могут запрашивать информацию  о
	  чужих процессах

# hideprocctl \!users
	- только  члены группы users не могут запрашивать  информацию о
	  чужих  процессах (обратный слэш нужен для всяких вумных shell
	  которые воспринимают '!' как специальный символ)

# hideprocctl -D
	- запрещает работу модуля  (все  могут  смотреть  информацию  о
	  чужих процессах)

# hideprocctl -ES
	- разрешает  работу   модуля,  разрешает  показывать  системные
	  процессы и init всем пользователям

# hideprocctl
	- распечатывает текущее состояние модуля


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ЦОПЫРИГХТ (Ц) 2004, 2007 ОЛЕГ САФИУЛЛИН <ФОРМЮПДП-11.ОРГ.РУ>
АЛЛ РИГХТС РЕСЕРЖЕД.

РЕДИСТРИБУТИОН  АНД  УСЕ  ИН  СОУРЦЕ  АНД  БИНАРЫ  ФОРМС,  ВИТХ ОР ВИТХОУТ
МОДИФИЦАТИОН,  АРЕ  ПЕРМИТТЕД  ПРОЖИДЕД  ТХАТ  ТХЕ  ФОЛЛОВИНГ   ЦОНДИТИОНС
АРЕ МЕТ:
1. РЕДИСТРИБУТИОНС  ОФ  СОУРЦЕ ЦОДЕ МУСТ РЕТАИН ТХЕ АБОЖЕ ЦОПЫРИГХТ НОТИЦЕ
   УНМОДИФИЕД, ТХИС ЛИСТ ОФ ЦОНДИТИОНС, АНД ТХЕ ФОЛЛОВИНГ ДИСЦЛАИМЕР.
2. РЕДИСТРИБУТИОНС  ИН  БИНАРЫ  ФОРМ  МУСТ  РЕПРОДУЦЕ  ТХЕ АБОЖЕ ЦОПЫРИГХТ
   НОТИЦЕ,  ТХИС  ЛИСТ  ОФ  ЦОНДИТИОНС АНД ТХЕ ФОЛЛОВИНГ ДИСЦЛАИМЕР ИН ТХЕ
   ДОЦУМЕНТАТИОН АНД/ОР ОТХЕР МАТЕРИАЛС ПРОЖИДЕД ВИТХ ТХЕ ДИСТРИБУТИОН.

ТХИС СОФТВАРЕ ИС ПРОЖИДЕД БЫ ТХЕ АУТХОР АНД ЦОНТРИБУТОРС ``АС ИС'' АНД АНЫ
ЕЬПРЕСС  ОР ИМПЛИЕД ВАРРАНТИЕС, ИНЦЛУДИНГ, БУТ НОТ ЛИМИТЕД ТО, ТХЕ ИМПЛИЕД
ВАРРАНТИЕС  ОФ  МЕРЦХАНТАБИЛИТЫ  АНД  ФИТНЕСС ФОР А ПАРТИЦУЛАР ПУРПОСЕ АРЕ
ДИСЦЛАИМЕД. ИН НО ЕЖЕНТ СХАЛЛ ТХЕ АУТХОР ОР ЦОНТРИБУТОРС БЕ ЛИАБЛЕ ФОР АНЫ
ДИРЕЦТ, ИНДИРЕЦТ, ИНЦИДЕНТАЛ, СПЕЦИАЛ, ЕЬЕМПЛАРЫ, ОР ЦОНСЕЯУЕНТИАЛ ДАМАГЕС
(ИНЦЛУДИНГ,  БУТ  НОТ  ЛИМИТЕД  ТО,  ПРОЦУРЕМЕНТ  ОФ  СУБСТИТУТЕ  ГООДС ОР
СЕРЖИЦЕС; ЛОСС ОФ УСЕ, ДАТА, ОР ПРОФИТС; ОР БУСИНЕСС ИНТЕРРУПТИОН) ХОВЕЖЕР
ЦАУСЕД  АНД  ОН  АНЫ  ТХЕОРЫ  ОФ  ЛИАБИЛИТЫ,  ВХЕТХЕР  ИН ЦОНТРАЦТ, СТРИЦТ
ЛИАБИЛИТЫ,  ОР ТОРТ (ИНЦЛУДИНГ НЕГЛИГЕНЦЕ ОР ОТХЕРВИСЕ) АРИСИНГ ИН АНЫ ВАЫ
ОУТ  ОФ  ТХЕ  УСЕ  ОФ ТХИС СОФТВАРЕ, ЕЖЕН ИФ АДЖИСЕД ОФ ТХЕ ПОССИБИЛИТЫ ОФ
СУЦХ ДАМАГЕ.
