<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<title>12.0 - Для опытных пользователей</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<h2><font color=#e00000>12.0 - Для опытных пользователей</font><hr></h2>
</p>

<p>
<ul><h3>Содержание</h3>
<li><a href="#12.1">12.1 - Принудительное использование DMA для IDE дисков</a>
<li><a href= "upgrade-minifaq.html">12.2 - Обновление различных версий OpenBSD посредством CVS.</a>
</ul>
</p> 
<hr>

<P>
под <i>опытными пользователями</i> мы подразумеваем людей, которые
имеют практические знания о том, как использовать и
управлять(администрировать) Юникс-подобной операционной системой. Если вы
будете следовать инструкциям в этом разделе без понятия того, что вы
делаете, вы можете вызвать проблемы в функционировании вашей системы.
<br>

<p>
<a name= "12.1">
<h2>12.1 - Принудительное использование DMA для IDE дисков</h2>
</a>

<p>
Код PCI IDE может не знать о вашем чипсете. Если это так, вы
получите сообщение подобное этому:
<UL>
<PRE>
pciide0: DMA, (unused)
</PRE>
</UL>
Если вы получаете это сообщение, вы можете попробовать режим DMA
принудительно, используя 'flags 0x0001' в входе pciide в
вашем конфигурационном файле ядра. Это может выглядеть например так:
<UL><PRE>
pciide* at pci ? dev ? function ? flags 0x0001
</PRE></ul>
После этого, код pciide будет пытаться использовать режим DMA 
независимо от того знает ли он как работать с вашим чипсетом.
Если это работает, и ваша система проходит через fsck и запускается, то
похоже что все будет работать хорошо. Если это не работает, и система
зависает или паникует после загрузки, то вы не можете использовать режим
DMA (до тех пор пока не будет добавлена поддержка для вашего
чипсета). Если вы нашли документацию для чипсета вашего PCI-IDE
контроллера, то это хороший старт для полной поддержки вашего чипсета
кодом PCI-IDE. Вы можете поискать ее на сайте производителя или позвонить
ему. Если ваш контроллер PCI-IDE является частью материнской платы,
узнайте кто производит чипсет и используйте их ресурсы!
<P>
Обратите внимание, вы узнаете что поддержка DMA появилась если увидите это
сообщение:
<UL><PRE>
cd0(pciide0:1:0): using PIO mode 3, DMA mode 1 (using DMA data transfers)
</PRE></UL>
Это значит что pciide0, channel 1, drive 0 (который похоже является ATAPI
CD-ROM) использует передачу данных DMA.
</ul>
</p>
<p>
Некоторые замечания:
</p>
<p>
DMA не поддерживается на wdc* до тех пор пока указан канал DMA (drq).
Я не уверен что есть "стандартные" drqs для контроллеров жесткого диска.
Чтобы разрешить
<pre>
wdc0	at isa? port 0x1f0 irq 14 flags 0x00
</pre>
Не ultra DMA не обязательно имеют большую пропускную способность по
сравнению с PIO. Иногда, это значительно уменьшает загрузку центрального
процессора.
</p>

<p>
<font color= "#0000e0">
<a href= "index.html">[Назад к главному разделу]</a>
<a href= "faq11.html">[К разделу 11.0 - Настройка Производительности]</a>
<a href= "faq13.html">[К разделу 13.0 - IPsec]</a>
</font>
</p>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src="../images/back.gif" border= "0" alt="[назад]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: faq12.html,v 1.24]<br>
$RuOBSD: faq12.html,v 1.25 2000/08/03 10:51:14 tm Exp $<br>
$Translation$<br>
$OpenBSD$
</small>
</p>
</body>
</html>
