<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>OpenBSD AnonCVS</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta name="resource-type" content="document">
<meta name="description" content="How to get OpenBSD updates via Internet using Anonymous CVS">
<meta name="keywords" content="openbsd,anoncvs,updates">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2001 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif">
<p>
<h2><font color="#e00000">Анонимный CVS</font></h2>

<hr>

<h3>Оглавление</h3>

<ul>
<li><a href="#anoncvs">Что такое анонимный CVS?</a>
<li><a href="#CVS">Что такое CVS?</a>
<li><a href="#starting">Начинаем работу с анонимным CVS</a>
<li><a href="#using">Использование CVS для получения и обновления исходных текстов</a>
<li><a href="#CVSROOT">Доступные анонимные CVS сервера</a>
<li><a href="#CRYPTO">Получение исходных текстов криптографического ПО через cvs(1)</a>
<li><a href="#EXAMPLE">Примеры применения cvs(1)</a>
<li><a href="#WHICH">Использовать rsh(1) или ssh(1)?</a>
<li><a href="#SUP">Зеркалируем CVS репозиторий используя sup(1)</a>
<li><a href="#MIRROR">Устанавливаем зеркало анонимного cvs</a>
</ul>

<hr>

<h3><a name="anoncvs"><font color="#0000e0">Что такое анонимный CVS?</font></a></h3>

<p>
Анонимный CVS - это метод хранения вашей локальной копии дерева исходных
текстов OpenBSD в новейшем состоянии, относительно изменений сделанных в
текущей версии OpenBSD. Кроме того, возможно отслеживать исправления к
ошибкам, допущенным в релизе.
</p>

<p>
Основное отличие анонимного CVS от других способов обновлять исходной текст,
в том, что он работает напрямую с центральным репозиторием исходных текстов
или зеркалом. Это означает, что вы имеете полный набор CVS команд для
обновления и объединения ваших изменений с другими изменениями и для
осуществления diff'ов, просмотра истории изменений и других запросов.
</p> 

<p>
В настоящее время проект OpenBSD имеет пять основных репозитория:
</p>

<ul>
  <li><b>src</b> - содержит весь исходный текст OpenBSD.</li>
  <li><b>ports</b> - содержит <a href="./ports.html">порты OpenBSD</a>.</li>
  <li><b>www</b> - содержит веб страницы OpenBSD (включая и эту).</li>
  <li><b>X11</b> - содержит адаптированное для OpenBSD программное обеспечение
      <a href="http://www.XFree86.org/">XFree86-3</a>.</li>
  <li><b>XF4</b> - содержит адаптированное для OpenBSD программное обеспечение
      <a href="http://www.XFree86.org/">XFree86-4</a>.</li>
</ul>

<!--
<p>
To summarize, the real strength of using Anonymous CVS is that it is
a "tolerant" source code control system - it <strong>respects</strong>
changes that you have made to your local sources and makes <strong>
"best efforts"</strong> to update your entire source tree, rather than
leaving you a list of arcane problems that have to be resolved before
continuing.
</p>
-->

<h3><a name="CVS"><font color="#0000e0">Что такое CVS?</font></a></h3>

<p>
<a href="../why-cvs.html">
CVS - это система контроля исходного кода для управления деревом исходных
текстов OpenBSD</a>. CVS осуществляет центральный репозиторий (склад) для всего
выпущенного исходного кода, и его изменений, позволяет разработчикам содержать
локальные копии исходного кода вместе с их работающими изменениями.
Разработчики имеющие "<b>доступ для записи</b>" могут совершать изменения
непосредственно в дереве исходных текстов OpenBSD, тогда как пользователи
анонимного CVS имеют "<b>доступ для чтения</b>" и могут хранить свои локальные
копии дерева исходных текстов в обновленном состоянии и осуществлять запросы
к центральному репозиторию.
</p>

<p>
Основное достоинство CVS - это способность выполнять разумное слияние изменений
в центральном репозитории с изменениями, которые вы вносите в вашу локальную
копию. Это значит что, если вы внесли изменения в модуль и выполните обновление,
ваши изменения не отбросятся, вместо этого CVS попытается объединить изменения
сделанные в центральном репозитории с вашими изменениями в локальной копии.
</p>

<p>
Когда изменения не могут быть полностью объединены, CVS обеспечивает "мягкий
откат", предоставляя сделать это вам, комментируя изменения в вашей локальной
копии и сохраняя резервную копию вашей версии и продолжая обновлять любые
другие исходные модули, которые вы запросили.
</p>

<h3><a name="starting"><font color="#0000e0">Начинаем работу с анонимным
CVS</font></a></h3>

<p>
Последняя версия CVS доступна на
<a href="http://www.cvshome.org/">Cyclic</a>.
Версии ранее, чем 1.6 не рекомендуются, и могут не работать.
CVS включен в состав OpenBSD.
</p>

<p>
Владельцы CD диска с OpenBSD, возможно, видели <i>CVS/</i> директории на нем.
CD диск содержит извлеченный модуль OpenBSD <b>src</b>, который удобно 
использовать для продолжения обновления исходных текстов. Используя это дерево
исходных текстов, обновление будет проходить значительно быстрее, нежели
извлечение полного дерева исходных текстов. Есть два способа использовать
этот CD:
</p>

<ul>
<li>Скопировать CVS дерево с CD в <i>/usr/src</i> (предполагается CD
примонтирован к /mnt): 
<pre>
	# <b>cd /mnt; pax -rw CVS Makefile [a-z]* /usr/src</b>
</pre>
<li>Использовать объединенное монтирование (см. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;apropos=0&amp;sektion=8&amp;manpath=OpenBSD+Current&amp;format=html">mount_union(8)</a>)
CD ниже директории доступной для записи. (Это может быть использовано только
для компилирования исходных текстов.)
<pre>
	# <b>mount -t union -o -b /mnt /usr/src</b>
</pre>
</ul>

<p>
Для тех, у кого нет CD, могут использовать <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
для получения дерева исходных текстов с сетевого репозитория. Подробно об
этом говорится в <a href="#using">следующей главе</a>.
</p>

<p>
После этого, <i>/usr/src</i> будет хорошим рабочим местом, где все <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">
cvs(1)</a> команды должны работать.
</p>

<h3><a name="using"><font color="#0000e0">Использование CVS для получения и
обновления исходных текстов</font></a></h3>

<p>
CVS был разработан, для предоставления простого способа к получению и обновлению
исходных текстов, поэтому он не такой сложный для понимания. Для начала, вы
должны решить, хотите вы следить за <i>текущей</i> веткой или за веткой
исправлений. Текущая ветка содержит все, до минутных изменений, тогда как
ветка исправлений содержит официальный релиз OpenBSD с добавленными из
<a href="../errata.html">errata</a> исправлениями. Для более подробного
объяснения, что представляет из себя <i>текущая</i> ветка, смотрите
<a href="../faq/upgrade-minifaq.html#1.1">Мини-FAQ по Обновлению</a>.

<p>Теперь вы должны выбрать, какой анонимный CVS сервер вы будите использовать.
Список доступных серверов приведен <a href="#CVSROOT">ниже</a>. Имеется 3
способа доступа к этим серверам.
</p>

<dl>
<dt><b>ssh</b><dd>Secure Shell может использоваться, для доступа к анонимным
CVS серверам. Мы <em>рекомендуем</em> этот способ, так как он использует
шифрованный канал для передачи данных. Начиная с версии 2.6 OpenSSH включен
в поставку OpenBSD.
<dt><b>rsh</b><dd>Remote Shell может использоваться на некоторых CVS серверах
для пользователей, которые не имеют доступ к
<a href="http://www.openssh.com">ssh</a>.
<dt><b>pserver</b><dd>pserver полезен, когда использование других способов
доступа неосуществимо (например, из-за файерволла).
</dl>

<p>
<b>ОБРАТИТЕ ВНИМАНИЕ:</b> Пользователи, желающие использовать ssh должны
установить переменную окружения <var>CVS_RSH</var>.

<ul>
<li>Для Korn/Bourne оболочек:
<pre>
	$ <b>export CVS_RSH=/usr/bin/ssh</b>
</pre>
<li>Для csh/tcsh:
<pre>
	% <b>setenv CVS_RSH /usr/bin/ssh</b>
</pre>
</ul>

<p>
Как только вы определились, какой <a href="#CVSROOT">CVS сервер</a> и способ
доступа к нему использовать, вы готовы начать работу с cvs. Для тех, у кого CD
с OpenBSD могут использовать находящиеся на нем исходные тексты, как описано
<a href="#starting">выше</a>. Если же у вас нет CD, используйте нижеприведенный
способ для получения исходных текстов. Этот способ поместит дерево исходных
текстов в <i>/usr/src</i>.
</p>

<pre>
	# <b>cd /usr; cvs checkout -P src</b>
</pre>

<p>
Вышесказанное извлечет <i>текущее</i> дерево исходных текстов. Чтобы
получить исходные тексты ветви исправлений, вы должны указать тег в вашей
команде. Например: 
</p>

<pre>
	# <b>cd /usr; cvs checkout -P -rOPENBSD_2_9 src</b>
</pre>
<p>
Или OPENBSD_2_8 для 2.8, и т.д.

<p> В настоящее время только тег OPENBSD_2_9 содержит релиз исходных
текстов с добавленными исправлениями.

<h3><a name="CVSROOT"><font color="#0000e0">Доступные анонимные CVS сервера
</font></a></h3>

<p>
Существует два уровня доступа к дереву исходных текстов:

<dl>

<dt><strong>Доступ для чтения и записи:</strong>
<dd>Разработчики, которые должны вносить изменения в дерево исходных текстов,
должны иметь аккоунт на CVS сервере OpenBSD. Получение этого доступа
естественный результат работы над исходными текстами OpenBSD совместно с
разработчиками. Если кто-то сделал хорошую работу и показал, что может
работать в команде, он получит аккоунт.
</dl>

<dl>
<dt><strong>Доступ только для чтения:</strong>
<dd>Любой пользователь может обращаться к CVS репозиторию с доступом только для
чтения. Эти CVS репозитории часто зеркалируются. Чтобы воспользоваться этим,
измените переменную окружения <var>CVSROOT</var> на одно из следующих значений:
<p>
<em>Пожалуйста, посмотрите главу об использовании ssh и rsh ниже!</em>
<p>
<ul>
<li><strong>CVSROOT=anoncvs@anoncvs1.usa.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs@anoncvs4.usa.openbsd.org</strong>.<br>
Расположение: Redwood City, California, western USA.<br>
сервер поддерживает <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
протоколы: rsh, ssh, ssh порт 2022, pserver.<br>
обновляется каждые 4 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.usa.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs3.usa.openbsd.org</strong>.<br>
Расположение: the University of Colorado, Boulder, western USA.<br>
сервер поддерживает <a href="mailto:millert@openbsd.org">Todd Miller</a>.<br>
протоколы: rsh, ssh, ssh порт 2022, pserver.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs5.usa.openbsd.org:/cvs</strong><br>
Псевдоним <strong>squid.nas.nasa.gov</strong>.<br>
Расположение: Ames Research Center, Moffett Field, California, USA.<br>
сервер поддерживает <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison
</a>.<br>
протоколы: ssh only.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@mirror.arc.nasa.gov:/cvs</strong><br>
Расположение: Ames Research Center, Moffett Field, California, USA.<br>
сервер поддерживает <a href="mailto:allison@mail.arc.nasa.gov">Tyler Allison
</a>.<br>
протоколы: ssh only.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs6.usa.openbsd.org:/cvs</strong><br>
Псевдоним <strong>openbsd.citi.umich.edu</strong>.<br>
Расположение: the University of Michigan, central USA.<br>
сервер поддерживает <a href="mailto:rees@umich.edu">Jim Rees</a>.<br>
протоколы: ssh, ssh порт 2022.<br>
обновляется каждые 12 часов.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.ca.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs.ca.openbsd.org</strong>, 
<strong>openbsd.sunsite.ualberta.ca</strong><br>
Расположение: Edmonton, Alberta, Canada.<br>
сервер поддерживает <A HREF="mailto:beck@ualberta.ca">Bob Beck</A>.<br>
протоколы: ssh, rsh, ssh порт 2022, pserver<br>
обновляется каждые 2 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.comstyle.com:/cvs</strong><br>
Псевдоним <strong>openbsd.comstyle.com</strong><br>
Расположение: Toronto, Ontario, Canada.<br>
сервер поддерживает <A HREF="mailto:brad@comstyle.com">Brad Smith</A>.<br>
протоколы: ssh, ssh порт 2022<br>
обновляется каждые 2 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.uk.openbsd.org:/cvs</strong><br>
Расположение: London, UK.<br>
сервер поддерживает <a href="mailto:peter@wonderland.org">Peter Galbavy</a>.<br>
протоколы: ssh only.<br>
обновляется каждые 6 часов.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs2.uk.openbsd.org:/cvs</strong><br>
Расположение: London, UK.<br>
сервер поддерживает <a href="mailto:joe@hole-in-the.net">Joe Warren-Meeks
</a>.<br>
протоколы: ssh only.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.tw.openbsd.org:/cvs</strong><br>
Псевдоним <strong>OpenBSD.csie.NCTU.edu.tw</strong>.<br>
Расположение: Taipei, Taiwan.<br>
сервер поддерживает
<a href="mailto:lkchu@OpenBSD.csie.NCTU.edu.tw">Liang-Kai Chu</a>.<br>
протоколы: rsh, ssh, ssh порт 2022.<br>
обновляется каждые 12 часов.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.no.openbsd.org:/cvs</strong><br>
Псевдоним <strong>cvs.inet.no</strong>.<br>
Расположение: Norway.<br>
сервер поддерживает <a href="mailto:cvsadmin@inet.no">Michael Shuldman</a>.<br>
протоколы: rsh, ssh, ssh порт 2022.<br>
обновляется каждые 4 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.se.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs.stacken.kth.se</strong>.<br>
Расположение: Sweden.<br>
сервер поддерживает <a href="mailto:anoncvs@stacken.kth.se">Magnus Holmberg
</a>.<br>
протоколы: rsh, ssh, ssh порт 2022.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.be.openbsd.org:/cvs</strong><br>
Псевдоним <strong>badlands.rug.ac.be</strong>.<br>
Расположение: Belgium.<br>
сервер поддерживает <a href="mailto:wvdputte@reptile.rug.ac.be">Wim Vandeputte
</a>.<br>
протоколы: ssh, ssh порт 2022.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.nl.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs.calyx.nl</strong>.<br>
Расположение: Amsterdam, The Netherlands.<br>
сервер поддерживает <a href="mailto:nick@calyx.net">Nick Merrill</a> and
<a href="mailto:alex@calyx.nl">Alexander Grendel</a>.<br>
протоколы: ssh.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.jp.openbsd.org:/cvs</strong><br>
Псевдоним <strong>kankoromochi.econ.nagasaki-u.ac.jp</strong>.<br>
Расположение: Nagasaki Univ. Faculty of Economics, JAPAN.<br>
сервер поддерживает <a href="mailto:sigh@net.nagasaki-u.ac.jp">SUZUKI Hitoshi
</a>.<br>
протоколы: ssh, pserver.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.cz.openbsd.org:/cvs</strong><br>
Псевдоним <strong>com-os2.ms.mff.cuni.cz</strong>.<br>
Расположение: Faculty Math &amp; Physics, Charles University, Prague, Czech
republic.<br>
сервер поддерживает
<a href="mailto:galambos@com-os2.ms.mff.cuni.cz">Leo Galambos</a>.<br>
протоколы: ssh, ssh порт 2022.<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs1.au.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs.au.openbsd.org</strong>, 
<strong>anoncvs.openbsd.aba.net.au</strong><br>
Расположение: Carlton, Victoria, Australia.<br>
сервер поддерживает <A HREF="mailto:mwp@aba.net.au">Micheal Paddon</A>.<br>
протоколы: ssh<br>
обновляется каждые 4 часа.<br>
<p>
<li><strong>CVSROOT :pserver:anoncvs@cvs.bsdfr.org:/cvs</strong><br>
Расположение: France<br>
сервер поддерживает: <a href="mailto:jch@oleane.net">Jean-Claude Christophe
</a>.<br>
протоколы: pserver<br>
обновляется каждые 24h <br>
<p>
<li><strong>CVSROOT=anoncvs@grappa.unix-ag.uni-kl.de:/cvs</strong><br>
Расположение: the University of Kaiserslautern, Germany<br>
сервер поддерживает <A HREF="mailto:hgw@d1906.inka.de">Hans G&uuml;nter Weigand
</A> и <A HREF="mailto:naddy@openbsd.org">Christian Weisgerber</A>.<br>
протоколы: rsh, ssh, ssh порт 2022, pserver<br>
обновляется каждые 6 часов с cvsup.uk.openbsd.org.<br>
<p>
<li><strong>CVSROOT=anoncvs@exokernel.lcs.mit.edu:/cvs</strong><br>
Расположение: M.I.T, Eastern USA.<br>
сервер поддерживает ????<br>
протоколы: ssh, ???<br>
обновляется каждые ? часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@xyzzy.gsnig.org:/cvs</strong><br>
Расположение: G&ouml;teborg, Sweden<br>
сервер поддерживает <A HREF="mailto:martin@openbsd.org">Martin Fredriksson
</A>.<br>
протоколы: ssh порт 2022<br>
обновляется каждые 4 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@stl-isaas.ey.com:/cvs</strong><br>
Расположение: St. Louis, MO, Eastern USA<br>
сервер поддерживает <A HREF="mailto:aaron11@sprynet.com">Aaron Miller</A>.<br>
протоколы: ssh, ssh порт 2022, pserver<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@openbsd.groupbsd.org:/cvs</strong><br>
Расположение: Hillsborough NC, Eastern USA<br>
сервер поддерживает <A HREF="mailto:jason@openbsd.org">Jason Wright</A>.<br>
протоколы: ssh<br>
обновляется каждые 4 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.mx.openbsd.org:/cvs</strong><br>
Расположение: Campus Iztacala, Universidad Autonoma de Mexico<br>
сервер поддерживает <A HREF="mailto:alex@iztacala.unam.mx">Alejandro Juarez
</A>.<br>
протоколы: ssh<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.pl.openbsd.org:/cvs</strong><br>
Псевдоним <strong>anoncvs1.pl.openbsd.org</strong>, 
<strong>incredible.bmtmc.gda.pl</strong><br>
Расположение: BMT Maritime Consultants, Gdansk, Poland<br>
сервер поддерживает <A HREF="mailto:detergent@incredible.bmtmc.gda.pl">
Adam Naguszewski</A>.<br>
протоколы: ssh, pserver<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@rt.fm:/cvs</strong><br>
Расположение: Lake in the Hills, Illinois, USA<br>
сервер поддерживает <A HREF="mailto:jcs@rt.fm">
Joshua Stein</A>.<br>
протоколы: ssh<br>
обновляется каждые 3 часа.<br>
<P>
<li><strong>CVSROOT=anoncvs@shellhung.org:/cvs</strong><br>
Расположение: Hong Kong, China<br>
сервер поддерживает <A HREF="mailto:shell@shellhung.org">
Shell Hung</A>.<br>
протоколы: pserver, ssh<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ar:/cvs</strong><br>
Расположение: Buenos Aires, Argentina<br>
сервер поддерживает <A HREF="mailto:alejo@fibertel.com.ar">
Alejo Sanchez</A> и
<A HREF="mailto:claudio@core-sdi.com">Claudio Castiglia</A>.<br>
протоколы: ssh<br>
обновляется каждые 3 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@cvs.openbsd.cz:/cvs</strong><br>
Расположение: Prague, Czech Republic<br>
сервер поддерживает <A HREF="mailto:vladya@openbsd.cz">Vladimir Kotal</A>.<br>
протоколы: ssh, pserver.<br>
обновляется каждые 4 часа.<br>
<p>
<li><strong>CVSROOT=anoncvs@anoncvs.openbsd.org.ua:/cvs</strong><br>
Расположение: Киев, Украина<br>
сервер поддерживает <A HREF="mailto:hunter@dg.net.ua">Sergey Smitienko</A>.<br>
протоколы: ssh<br>
обновляется каждые 6 часов.<br>
</ul>


<p>
<em>Обратите внимание:</em> Если ваш сервер перечислен здесь с неточной или
неполной информацией, пожалуйста, свяжитесь с
<a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
</p>

<p>
Вы можете использовать <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&amp;sektion=8&amp;format=html">traceroute(8)</a>,
чтобы определить какой сервер находится ближе к вам. При возникновении проблем
с сервером свяжитесь с <b>поддерживающим его персоналом</b>. 
</dl>

<h3><a name="CRYPTO"><font color="#0000e0">Получение исходных текстов
криптографического ПО через cvs(1)</font></a></h3>

<p>
<strong>ВАЖНОЕ ПРИМЕЧАНИЕ:</strong>
Имеется несколько ограничений, касающихся криптографического программного
обеспечения, которые вы должны знать: 
<ul>
<li>Родина OpenBSD - Канада. Согласно
<a href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">
исследованиям</a>, проведенным гражданином Канады, и как значится в
<a href="http://axion.physics.ubc.ca/ECL.html">
списке контроля над экспортом Канады</a>, экспортировать криптографическое
ПО в остальной мир РАЗРЕШЕНО. 
<p>
<li>Тем не менее, если вы находитесь вне США или Канады, вы не должны
использовать криптографические части OpenBSD с анонимных CVS серверов
расположенных в США. Рассматриваемые файлы... 
<ul>
<li>src/kerberosIV/*
<li>src/lib/libdes/*
<li>src/lib/libc/crypt/crypt.c
<li>src/lib/libc/crypt/morecrypt.c
<li>src/sys/netinet
<li>src/usr.sbin/afs/src/rxkad/*
<li>X11/xc/lib/Xdmcp/Wraphelp.c
</ul>
По законам США ITAR криптографическое ПО может экспортироваться только в Канаду.
<p>
<li>Проект OpenBSD ищет дополнительные анонимные CVS сервера -- читайте далее,
чтобы узнать как вы можете помочь.
</ul>

<h3><a name="EXAMPLE"><font color="#0000e0">Примеры применения cvs(1)</font>
</a></h3>

<p>
Примеры использования анонимного CVS:
<pre>
% <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cd /tmp</strong>
% <strong>cvs get src/sys/arch/sparc</strong>
    [копирует файлы с репозитория на вашу машину]
% <strong>cvs log src/sys/arch/sparc/sparc/locore.s</strong>
    [показывает регистрационную информацию для заданного файла]
% <strong>cvs diff -bc -r1.1 -r1.5 src/sys/arch/sparc/sparc/locore.s</strong>
    [показывает изменения файла между ревизиями 1.1 и 1.5]
</pre>

<p>
<a name="pserver">Чтобы подключится к серверу используя ''pserver''
(прямое TCP подключение вместо ssh или rsh) пользователь должен
зарегистрироваться:</a>

<pre>
% <strong>setenv CVSROOT :pserver:anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
% <strong>cvs login</strong>
(Logging in to anoncvs@anoncvs1.ca.openbsd.org)
CVS password: <strong>anoncvs</strong>
    [ При регистрации на сервере проверяется пароль, который затем ]
    [ сохраняется в файле ~/.cvspass (можно переназначить с        ]
    [ помощью переменной окружения CVS_PASSFILE) для дальнейшего   ]
    [ общения с сервером. Для примера, содержимое ~/.cvspass при   ]
    [ использовании пароля 'blah':                                 ]
    [ :pserver:anoncvs@anoncvs5.usa.openbsd.org:/cvs Au'yc         ]
    [ После регистрации вы можете заставить CVS соединяться        ]
    [ напрямую с сервером, используя при этом сохраненный пароль.  ]
% <strong>cvs get ksrc-i386 ksrc-common</strong>
    [ позволяет вам запросить файлы необходимое для компиляции ядра на i386 ]
</pre>

<p>
Здесь приведен пример использования анонимного CVS для регулярного
обновления дерева исходных текстов:
<ul><li>Для начала, возьмем полное дерево исходных текстов:

<p> (Если вы следуете за <i>текущей</i> веткой):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -PA src</strong>
</pre>

<p> (Если вы следуете за веткой исправлений для 2.9):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_2_9 -P src</strong>
</pre>
</li>

<li> И потом, в любое время, `обновим' это дерево:
<p> (Если вы следуете за <i>текущей</i> веткой):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -q up -PAd</strong>
</pre>

<p> (Если вы следуете за веткой исправлений для 2.9):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -q up -rOPENBSD_2_9 -Pd</strong>
</pre>

Каждый раз при запуске этих команд, CVS будет синхронизировать ваше /usr/src
дерево. Ваши локальные изменения исходного текста не будут уничтожены, они
сольются с другими изменениями. Если вы используете obj директории (не
символические ссылки) вы можете добавить "-I obj" к команде запуска cvs, это
задаст cvs не выводить предупреждения обо всех встречающихся obj директориях
которых нет в репозитории.

<p>
<li> ПРИМЕЧАНИЕ: Если вы обновляете дерево исходных текстов, которое вы
получили с другого сервера или с CD, вы <strong>должны</strong> добавить
опцию <em>-d $CVSROOT</em> к команде запуска cvs. Если вы следуете за веткой
исправлений, убедитесь, что вы <strong>убрали</strong> флаг <code>-A</code>
из команды cvs, в противном случае вы получите <i>текущее</i> дерево.

<p> (Если вы следуете за <i>текущей</i> веткой):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -d $CVSROOT -q up -PAd</strong>
</pre>

<p> (Если вы следуете за веткой исправлений):
<pre>
	# <strong>cd /usr/src</strong>
	# <strong>cvs -d $CVSROOT -q up -Pd</strong>
</pre>

</li>
</ul>

<p>
<a name="ports">Использование</a> <a href=ports.html>портов</a>, аналогично
src:<ul><li>
<p> (Если вы следуете за <i>текущей</i> веткой):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -PA ports</strong>
</pre>
<p> (Если вы следуете за веткой исправлений):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_2_9 -P ports</strong>
</pre>
<p> (Если вы хотите использовать дерево портов перед тем, как
	<a href="ports.html#Life">оно было объявленно как -текущее</a>):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q get -rOPENBSD_2_9_TRACKING_SWITCH -P ports</strong>
</pre>
</li>
<li>Позднее, в любое время `обновим' это дерево:
<p> (Если вы следуете за <i>текущей</i> веткой):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -PAd ports</strong>
</pre>
<p> (Если вы следуете за веткой исправлений):
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -rOPENBSD_2_9 ports</strong>
</pre>
<p> (Если вы хотите использовать дерево портов перед тем, как
	<a href="ports.html#Life">оно было обявленно как -текущее</a>):
<pre>
	# <strong>setenv CVSROOT anoncvs@anoncvs.ca.openbsd.org:/cvs</strong>
	# <strong>cd /usr</strong>
	# <strong>cvs -q up -rOPENBSD_2_9_TRACKING_SWITCH -P ports</strong>
</pre>
</li>
</ul>

В приведенном примере, используется необязательный флаг <i>-q</i>, он необходим
для того, чтобы уменьшить вывод команды cvs. Вы можете опустить его.

<p>
создадим diff локально исправленного модуля (здесь <i>cd.c</i>) для
включения в отчет об ошибке:
<pre>
	# <strong>cd /usr</strong>
	# <strong>cvs diff -u src/sys/scsi/cd.c &gt; /tmp/patch</strong>
</pre>

<p>
На странице руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1&amp;format=html">cvs(1)</a>
(поставляется с исходными текстами CVS) вы найдете гораздо больше информации о
CVS и возможностях его использования.

<h4>Дерево исходных текстов X11</h4>

<p>
Зеркала анонимного CVS также содержат исходные тексты OpenBSD X11. Вы можете
обновить дерево исходных текстов X11 со второго CD. Используйте копирование или
объединенное монтирование, чтобы получить исходные тексты X11 в <i>/usr/X11</i>:

<ul>
<li>копирование дерева (предполагается 2й CD примонтирован к /mnt): 
<pre>
        # <strong>cd /mnt; cp -Rp X11 /usr</strong>
</pre>
<li>объединенное монтирование CD ниже директории доступной для записи:
<pre>
        # <strong>mount -t union -o -b /mnt/X11 /usr/X11</strong>
</pre>
</ul>

После этого, <i>/usr/X11</i> готово к использованию cvs. Вы можете обновить
исходные тексты до текущей версии (предполагается вы уже установили переменную
окружения <var>CVSROOT</var>):

<pre>
        # <strong>cd /usr/X11</strong>
        # <strong>cvs -q update -PAd</strong>
</pre>

<!--
<p>
<strong>Warning:</strong>
When using cvs you should take care that your current directory is either
the root of the tree you are referencing or in a separate place such as /tmp.
Some commands such as "get" can create an arbitrary sub-tree in the current
directory, and a subsequent update will recursively flesh out this sub-tree.
-->

<p>
Сервис анонимного CVS дает неопытным разработчикам возможность для изучения
CVS команд и позволяет прочувствовать процесс разработки перед тем, как они
получат доступ "для разработчиков" -- как результата демонстрации полезных
навыков и высококачественных результатов. Люди создающие исправления, могут
создавать diff'ы относительно дерева CVS, чтобы упростить интеграцию.

<h3><a name="WHICH"><font color="#0000e0">Использовать rsh(1) или ssh(1)?</font>
</a></h3>

<p>
<strong>Анонимный CVS: rsh против ssh</strong>
<br>
По умолчанию, CVS клиент использует rsh для работы с CVS сервером. Большинство
CVS серверов больше не поддерживают этот протокол по соображениям безопасности
или из-за локальных проблем, например файерволл или из-за несовершенства
эмулятора протокола slirp. Все это может помешать вам использовать rsh.
Альтернатива в использовании "secure shell" соединения с помощью
<a href="http://www.openssh.com/">OpenSSH</a>.

<p>
Если ssh установлен в системе, измените переменную окружения
<var>CVS_RSH</var>, чтобы она указывала на ssh (обычно
<strong>/usr/bin/ssh</strong>). Если по каким-то причинам вы
не можете соединится с 22 портом (стандартным для ssh)
воспользуйтесь 2022 портом.

<p>
Не включайте программное сжатие данных т.к. CVS уже сжимает эти данные.
Используйте что-то подобно нижеследующему в вашем
<strong>$HOME/.ssh/config</strong> файле. Стоить заметить, что не все сервера
анонимного CVS поддерживают ssh соединение на 2022 порт. Так же, стоит обратить
внимание на то, что большинство анонимных CVS серверов больше не принимают
шифрование <strong>none</strong>, поскольку оно не используется в последних
версиях ssh по соображениям безопасности.
<pre>
	Host anoncvs.ca.openbsd.org
	    Port 2022
</pre>

<p>
При запуске, CVS будет немного шуметь; чтобы заставить его замолчать можете
проделать следующее:

<pre>
	<strong>% setenv CVS_CLIENT_PORT -1</strong>
</pre>

<p>
<h3><a name="SUP"><font color="#0000e0">Зеркалируем CVS репозиторий используя
sup(1)</font></a></h3>

<p>
Пользователи, желающие зеркалировать OpenBSD CVS дерево, могут сделать это с
<em>anoncvs.usa.openbsd.org</em> или <em>anoncvs1.usa.openbsd.org</em>
(это разные машины). Обратите внимание, что это CVS дерево, а <b>не</b>
извлеченное дерево исходных текстов. Это полезно, если вы хотите производить
быстрые cvs операции (diff, annotate и т.д) или если у вас имеется множество
деревьев исходных текстов и вы только хотите переслать новые данные один раз
(и затем обновлять деревья с вашего локального зеркала cvs).
<p>
Пример supfile'а:
<pre>
	cvs host=anoncvs.usa.openbsd.org hostbase=/ base=/home delete
</pre>
<p>
который заставит зеркалировать CVS дерево в /home/cvs вместе с файлами данных
sup в /home/sup. Полное OpenBSD cvs дерево около 1.3 гигабайта в размере.

<h3><a name="MIRROR"><font color="#0000e0">Устанавливаем зеркало анонимного
cvs</font></a></h3>

<p>
Если вы желаете создать новое зеркало анонимного CVS, свяжитесь с
<a href="mailto:sup@openbsd.org">администратором анонимного CVS</a>.
Зеркала анонимного CVS требуют около 1.2GB дискового пространства, и
используют примерно 32MB свопа на одного пользователя (предполагается,
что пользователь делает крупные операции; соответственно мелкие операции
используют меньше ресурсов, но все равно, воздействие гораздо большее, чем
при sup или ftp). Эти сервера, должны иметь хорошую пропускную способность
сети для области, которую они собираются обслуживать. Подробнее об установке
анонимного CVS сервера <a href=../anoncvs.shar>в этом документе</a>.

<h3><font color="#0000e0">Заключение</font></h3>
После обновления дерева исходных текстов и перед попыткой компиляции,
прочитайте комментарии в начале файла <KBD>/usr/src/Makefile</KBD>. Желательно,
чтобы вы откомпилировали и установили новое ядро <strong>перед</strong>
запуском <KBD>make build</KBD>. В некоторых случаях придется пересобрать и
установить утилиту <KBD>config</KBD>, пред тем как пересобирать ядро. Если
<KBD>config GENERIC</KBD> оканчивается неудачей, возможно это и есть тот самый
случай.
<p>
Обратите внимание, что переход с релиза на текущее дерево, пересборкой исходных
текстов, может быть затруднен из-за зависимостей, которые часто не очевидны.
Поэтому, предпочтительней, если вы сначала установите самый последний снапшот,
и уже потом попытаетесь собрать.

<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0"
alt="OpenBSD"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
Originally [OpenBSD: anoncvs.html,v 1.157 ]<br>
$RuOBSD$ 
$Translation: anoncvs.html,v 1.2 2001/08/31 19:48:18 dfa Exp $<br>
$OpenBSD$
</small>

</body>
</html>
