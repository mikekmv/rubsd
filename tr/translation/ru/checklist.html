<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
	<head>

		<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
		<meta name="resource-type" content="document">
		<meta name="description" CONTENT="Как создать/обновить порт OpenBSD.">
		<meta name="keywords" content="openbsd,ports">
		<meta name="distribution" content="global">
		<meta name="copyright" content="This document copyright 1998-2002 by OpenBSD.">
		
		<title>OpenBSD Porting Checklist</title>

	 </head>
 
	<body text="black" bgcolor="white" link="#23238E">

		<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>
		
		<h2><font color="#e00000">OpenBSD Porting Checklist</font></h2>
		
		В документе представлена информация о том, как следует 
		разрабатывать и обновлять программные пакеты ports 
		(далее - <i>порты</i>). Предложенная инструкция не претендует 
		на безошибочность и полноту, но адекватно отражает шаги, 
		которые необходимо сделать для публикации проекта.
		Если у вас есть вопросы или комментарии, отправьте их 
		на английском языке по адресу 
		<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
		
		<hr>
		<ol>
			<li> 
			Если вы хотите стать разработчиком портов, подпишитесь на список 
			рассылки <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
				<ul>
					<li>Этот список рассылки предназначен для обсуждения портов.</li>
					<li>Через него распространяются многие важные объявления.</li>
					<li>На него подписаны ваши коллеги и единомышленники. Эти люди 
					    могут дать отличный совет или помочь с тестированием вашего проекта.</li>
				</ul>
				<br />
			</li>
			<li>
				Имейте в виду, что разработка и поддержка портов подразумевает 
				нечто <strong>большее</strong>, чем просто размещение файлов.
				Как минимум, необходимо, чтобы вы регулярно обновляли свой проект, 
				а также были готовы отвечать на возникающие вопросы.<br /><br />
			</li>
			<li>
				Получите "дерево" портов из cvs.
				О том, как это сделать, рассказано на странице
				<a href="anoncvs.html">http://www.openbsd.org/ru/anoncvs.html</a>.<br /><br />
			</li>
			<li> 
				Выберите место для вашего порта 
				и подготовьте порт к размещению.
				Рекомендуется использовать для этого шаблон 
				Makefile, находящийся по адресу
				<code>/usr/ports/infrastructure/templates/Makefile.template</code>.<br />
				Параметр NEED_VERSION является устаревшим, 
				и его не следует использовать в новых портах.
				Как разработчик портов, вы должны полностью 
				поддерживать "дерево" ваших проектов, включая файл 
				bsd.port.mk.
				<ul>
					<li>Создайте каталоги <code>patches, pkg</code>.</li>
					<li>Создайте пустые файлы <code>pkg/DESCR, pkg/PLIST</code>.</li>
				</ul>
				<br />
			</li>
			<li> 
				Добавьте загрузочную информацию в Makefile.  
				<ul>
					<li>Укажите EXTRACT_SUFX, если вы используете суффикс, отличный от .tar.gz.
					    Например, это может быть .tar.Z или .tgz.</li>
					<li>Укажите DISTNAME - имя архивного файла без суффикса.
					    Например, для проекта foo-1.0.tar.gz DISTNAME должен содержать foo-1.0.</li>
					<li>Поместите в MASTER_SITES пути URL к каталогам с дистрибутивом, например:
					    ftp://ftp.openbsd.org/pub/OpenBSD/distfiles/. <strong>Не забудьте 
					    косую черту в конце!</strong> Постарайтесь сделать так, чтобы
					    дистрибутив можно было найти по меньшей мере на трёх
					    различных серверах. В начало поместите те из них, которые наиболее доступны.</li>
					<li>Таким образом, полный путь к файлу должен описываться сочетанием параметров
					    ${MASTER_SITES}${DISTNAME}${EXTRACT_SUFX}. Не помещайте весь путь 
					    в DISTNAME.</li>
					<li>Проверьте правильность установки этих значений с помощью команды
					    <b>make fetch-all</b>.</li>
				</ul>
				<p>
					Если вы сопровождаете сложный проект, вам пригодятся дополнительные возможности:
					<ul>
						<li>В переменную PATCHFILES можно поместить список патчей от разработчика порта. 
						    Это хороший способ улучшения безопасности и надёжности проекта.</li>
						<li>Если ваши порты находятся на крупных зеркалах, таких как GNU, SunSite или CPAN, 
						    воспользуйтесь готовым списком серверов, который мы поместили в файл
						    /usr/ports/infrastructure/template/network.conf.template.
						    Присвойте параметру MASTER_SITES значение ${MASTER_SITE_GNU}, ${MASTER_SITE_SUNSITE},
						    или другой из списка.
						    Чтобы упростить этот процесс, используйте конструкцию вида ${MASTER_SITE_FOO:=subdir/}
						    для обозначения каталога с дистрибутивом.</li>
						<li>Согласно общепринятой практике, порт должен ознозначно ассоциироваться 
						    с определённой версией программы. После загрузки контрольные суммы 
						    файлов сверяются с записями в distinfo. Чтобы избежать 
						    несоответствий, при работе с DISTFILES и PATCHFILES следует использовать 
						    отчётливо видимые номера версий: например, не имеет смысла загружать 
						    foo-latest.tar.gz, когда он представляет собой ссылку на foo-1.0.5.tar.gz.
						    Если автор какой-либо программы не понимает необходимости различать версии,
						    свяжитесь с ним и вежливо попросите его следовать правилам.</li>
						<li>Если порт требует более 5 DISTFILES + PATCHFILES для работы, 
						    используйте DIST_SUBDIR, чтобы не загромождать каталог /usr/ports/distfiles
						    слишком сильно.</li>
						<li>DIST_SUBDIR не должен содержать номера версий. Когда порт обновляется 
						    до последней версии, некоторые файлы дистрибутива могут остаться
						    неизменными, но будут запрошены ещё раз после изменения DIST_SUBDIR.
						    Даже если обновятся все файлы, пользователю будет проще загрузить всё,
						    чем отслеживать многочисленные изменения.</li>
						<li>Совсем не обязательно получать всё содержимое DISTFILES и PATCHFILES 
						    из одного и того же набора MASTER_SITES. В переменных 
						    MASTER_SITES0...MASTER_SITES9 можно указать дополнительные адреса. 
						    Например, чтобы загрузить foo-1.0.5.tar.gz с MASTER_SITES5, 
						    используйте значение DISTFILES=foo-1.0.5.tar.gz:5.</li>
						<li>Некоторым портам не требуется извлекать все файлы отовсюду.
						    Например, часть файлов может понадобиться только при установке
						    определённых опций компиляции или для отдельных платформ.
						    В таких случаях дополнительные файлы следует указывать в переменной
						    SUPDISTFILES. Получать их можно с помощью makesum или mirror-distfiles,
						    что обычным пользователям не понадобится.</li>
					</ul>
					<br />
				</p>
			</li>
			<li>Добавьте контрольную сумму в <i>distinfo</i>: для этого достаточно набрать 
			    <b>make makesum</b>. Проверьте правильность контрольной суммы с помощью 
			    команды <b>make checksum</b>.
				<ul>
					<li>
						В некоторых (достаточно редких) случаях проверка контрольных сумм файлов
						может оказаться невозможной. Тем не менее, разработчики портов должны
						по крайней мере попробовать найти серверы, на которых всё в порядке.
						Если это не удастся, для решения проблемы лучше всего связаться 
						с автором программы и администратором сервера архивов. 
						Если из этого тоже ничего не выйдет, укажите файлы, проверка 
						которых невозможна, в переменной IGNOREFILES.
					</li>
					<li>
						При исполнении команды make extract, как правило, обрабатываются 
						все файлы в DISTFILES. Чтобы распаковать только подмножество файлов
						(в том числе пустое), следует использовать EXTRACT_ONLY.
						Эта переменная полезна для организации сложной распаковки:
						если какие-либо файлы из DISTFILES нуждаются в особом отношении,
						их стоит исключить из EXTRACT_ONLY и обработать вручную
						на следующем этапе. Исторически сложилось так, что make extract
						создаёт рабочий каталог одновременно с распаковкой файлов.
						Попытки же реализовать pre-extract или do-extract
						не только подозрительны, но и демонстрируют чрезмерную запутанность порта.
					</li>
					<li>
						Патчи, которым необходима дополнительная обработка, должны быть
						указаны в DISTFILES и исключены из EXTRACT_ONLY по тем же историческим
						причинам.
					</li>
				</ul>
				<br />
			</li>
			<li>
				Распакуйте порт командой <b>make extract</b>. Обратите внимание 
				на базовый путь к исходным текстам. Как правило, он должен
				быть эквивалентным <i>w-${PKGNAME}${FLAVOR_EXT}/${DISTNAME}</i>. 
				Если это не так, измените переменную WRKDIST в Makefile 
				на правильное значение.
				<br /><br />
			</li>
			<li>
				Прочтите руководство по установке и запишите действия,
				которые необходимо выполнить для компиляции порта с заданными параметрами.<br /><br />
			</li>
			<li>
				Теперь самое время решить, какое лицензионное соглашение вы хотите
				использовать для вашего порта. Многие программы распространяются
				без ограничений, но возможны и другие варианты.
				Нам нужно знать ответы на четыре вопроса, чтобы правильно распространять
				ваш порт. Они представлены в виде значений PERMIT_* в Makefile.
				<ul>
					<li>PERMIT_PACKAGE_CDROM разрешает нам поместить пакет на CD-ROM.</li>
					<li>PERMIT_PACKAGE_FTP сообщает о том, что мы можем разместить пакет на FTP-серверах.</li>
					<li>PERMIT_DISTFILES_CDROM позволяет нам поставлять пакет в составе дистрибутивных файлов на CD-ROM.</li>
					<li>PERMIT_DISTFILES_FTP даёт те же права на FTP.</li>
				</ul>
				<p>
					Если какое-либо из действий разрешено, присвойте соответствующей переменной Yes,
					в противном случае закомментируйте строку. Не забудьте обеспечить
					выполнение специальных условий лицензии. Так, некоторые программы требуют
					установки на компьютер копии лицензии. Мы рекомендуем размещать её
					в каталоге <code>/usr/local/share/DISTNAME/</code>.
					<br /><br />
				</p>
			</li>				
			<li>
				Добавьте опции конфигурации в Makefile и/или создайте конфигурационный скрипт.
				<ul>
					<li>
						Вы можете поместить скрипт `configure' для настройки порта в каталог
						<code>scripts/</code>. Система будет выполнять его до 
						запуска указанных в CONFIGURE_STYLE скриптов. 
					</li>
					<li>
						Если используется GNU configure, вы можете получить список
						параметров с помощью команды ./configure --help.
					</li>
					<li>
						Если вы хотите изменить какие-нибудь из них, 
						добавьте флаг --option в параметр CONFIGURE_ARGS файла Makefile.  
					</li>
					<li>
						Чтобы добавить текст в CONFIGURE_ARGS, используйте 
						запись CONFIGURE_ARGS+=. CONFIGURE_ARGS= заменит текущее значение.
					</li>
				</ul>
				<br />
			</li>
			<li>
				Попробуйте сгенерировать порт командой <b>make build</b>.  
				<ul>
					<li>Если вам повезло, операция пройдёт без ошибок.</li>
					<li>Если ошибки всё же появились, вам придётся написать заплатку.
					    Сделайте необходимые изменения кода и зафиксируйте их в патч-файле.</li>
					<li>Необходимо генерировать патчи относительно каталога ${WRKDIST}.</li>
					<li>Самый простой способ начать всё сначала и протестировать патчи - выполнить
					    команду <b>make clean patch</b>. Она удаляет рабочий каталог, вновь извлекает порт
					    из архива и добавляет изменения из патча.</li>
				</ul>
				<br />
			</li>
			<li>
				Запустите в очередной раз <b>make build</b>, сделайте патч-файл 
				(или воспользуйтесь <b>make update-patches</b>) и выполните 
				команду <b>make clean patch</b>. 
				<ul>
					<li>
						Заплатки должны располагаться в каталоге <i>patches/</i> и иметь 
						названия вида patch-*, где * обозначает значимую часть.
						Мы рекомендуем вам формат patch-FILENAME, где FILENAME - имя
						файла, для которого подготовлена заплатка.
						(<tt>make update-patches</tt> назначает такие имена автоматически.)
					</li>
					<li>
						Использование PATCHFILES - только одна половина дела. Вы можете 
						заниматься этим специально, чтобы подготовить патч для дистрибутива, что 
						и является целью создателя порта. Если вы не планировали такой задачи,
						проигнорируйте этот шаг.
					</li>
					<li>
						Для каждого файла с исходным текстом используйте отдельный патч-файл.
					</li>
					<li>
						Используйте команду <b>make update-patches</b>, чтобы создавать патчи.
					</li>
					<li>
						Все патчи ДОЛЖНЫ быть созданы относительно каталога ${WRKDIST}.
					</li>
					<li>
						Убедитесь, что ни один патч <strong>не содержит</strong> тегов,
						которые может изменить cvs. Если это случится, вы не сможете
						использовать патч после помещения в репозиторий. Чтобы
						получить гарантии неизменности кода, используйте при помещении 
						ключ -kk.
					</li>
					<li>
						Добавьте непосредственно перед кодом заплатки небольшое описание 
						задачи, которую она решает, а также тег OpenBSD CVS
						<code>&#36;OpenBSD&#36;</code>.
					</li>
					<li>
						<b>Обязательно</b> перешлите вашу заплатку автору 
						оригинального программного продукта.
					</li>
				</ul>
				<br />
			</li>
			<li>
				Попробуйте использовать <code>SEPARATE_BUILD</code>.<br />
				<ul>
					<li>
						Если порт сможет собираться с использованием объектных файлов
						за пределами каталога исходных текстов, это очень хорошо
						(многие программы используют <code>CONFIGURE_STYLE=gnu</code>),
						и, кроме того, это позволит пользователям монтировать свои каталоги 
						с портами в нескольких местах.
					</li>
					<li>
						Вам удастся сэкономить время и силы, поскольку вы
						сможете гораздо проще повторять цикл <code>configure</code>.
					</li>
				</ul>
				<br />
			</li>
			<li>
				Проанализируйте текст, который make выводит на консоль (если он есть), 
				и попробуйте протестировать Makefile с использованием каких-нибудь опций.
				Для повторения операции используйте команду '<b>make clean configure</b>'.
		
				<p>
					Внимание: убедитесь, что конфигурационные файлы, создающиеся 
					для этого компьютера, образуются в каталоге <i>/etc</i> или
					<i>/etc/&lt;name&gt;</i>, но <strong>НЕ ЗАМЕНЯЮТ 
					И НЕ МОДИФИЦИРУЮТ</strong> уже имеющиеся файлы в <i>/etc</i>.
					Наилучший способ инсталляции - создавать их в каталоге 
					<i>/usr/local/share/&lt;name&gt;</i>, а копировать в
					<i>/etc</i> или <i>/etc/&lt;name&gt;</i> лишь те, которые 
					ещё не существуют. Если файлы всё-таки существуют, следует
					сообщить пользователю о необходимости изменить их. Такой метод установки
					гарантирует наличие альтернативных версий файлов, поскольку
					каталог <i>/usr/local</i> включён в PLIST. После того как пакет установлен,
					следует вывести на консоль содержимое файла <code>pkg/MESSAGE</code>,
					если он существует.
				</p>
				<p>
					Инсталлятор должен размещать файлы таким образом:
				</p>
				<pre>
   исполняемые пользователями:			/usr/local/bin
   исполняемые администратором:			/usr/local/sbin
   исполняемые системой (например, демоны):	/usr/local/libexec
   библиотеки:					/usr/local/lib
   зависимые от платформы данные:		/usr/local/lib/&lt;name&gt;
   установленные include-файлы:			/usr/local/include or
						/usr/local/include/&lt;name&gt;
   конфигурационные:				/etc или /etc/&lt;name&gt;
   информация о состоянии (pid и т. п.):	/var/run
   счётчики для игр:				/var/games
   info-файлы GNU:				/usr/local/info
   страницы man:				/usr/local/man/...
   только для чтения, платформонезависимые:	/usr/local/share/&lt;name&gt;
   файлы документации:				/usr/local/share/doc/&lt;name&gt;</pre>
			</li>
			<li>
				Генерируйте заплатки (см. выше) правильно, и работайте над портом
				до тех пор, пока он не будет готов. Добейтесь исчезновения
				всех ошибок и предупреждений; особенно тех, 
				которые связаны с безопасностью.
				<br /><br />
			</li>
			<li>
				Проверяйте семантику SEPARATE_BUILD.
				Это необходимо только в случае, если порт генерируется 
				с использованием SEPARATE_BUILD.
				В идеале порт не должен модифицировать никаких 
				файлов в ${WRKSRC} после запуска <b>make patch</b>. Чтобы
				убедиться в этом, проверьте права на доступ к каталогу ${WRKSRC}:
				они должны быть ограничены чтением. Теперь вы можете установить значение
				SEPARATE_BUILD=concurrent, что позволит пользователям
				генерировать программы параллельно из одного и того же источника.
				В противном случае пользуйтесь вариантом <code>SEPARATE_BUILD=simple</code>:
				одновременная генерация станет проблематичной, так как
				некоторые исходные тексты могут быть обновлены в
				самый непоходящий момент.
				<br /><br />
			</li>
			<li>
				Добавьте <i>COMMENT</i> в Makefile.
				COMMENT - это <strong>КОРОТКОЕ</strong>, однострочное описание порта
				(не более 60 символов). <strong>НЕ ВКЛЮЧАЙТЕ</strong> имя пакета или
				его версию в комментарий. <strong>НЕ НАЧИНАЙТЕ</strong> комментарий 
				с заглавной буквы, если это не требуется по смыслу, <strong>НЕ ПИШИТЕ</strong>
				сложных законченных предложений. <strong>НЕ НАЧИНАЙТЕ ОПИСАНИЕ 
				С НЕОПРЕДЕЛЁННОГО АРТИКЛЯ, ТАКОГО КАК 'a' или 'as',
				лучше вообще избавьтесь от артиклей.</strong>
				<br /><br />
			</li>
			<li>
				Отредактируйте <i>pkg/DESCR</i>, <i>pkg/PLIST</i>.
				<ul>
					<li>
						Файл DESCR представляет собой подробное описание порта.
						Одного или нескольких абзацев вполне достаточно, чтобы
						в целом описать возможности продукта. Для удобства чтения
						рекомендуем ограничить длину строк текста 80 символами.
						Это легко сделать после первого же редактировании файла 
						с помощью команды 'fmt -w 80'.
					</li>
					<li>
						PLIST на этом этапе должен оставаться пустым.
					</li>
				</ul>
				<br />
			</li>
			<li>
				Установите приложение при помощи команды <b>make install</b>.
				<p>
					Если порт устанавливает динамические библиотеки, проверьте их
					символьные таблицы при помощи команды <code>nm</code>, так как
					некоторые программы ошибочно удаляют библиотеки, что может 
					привести к последующим отказам.
					С другой стороны, исполняемые бинарные файлы ДОЛЖНЫ быть удалены; 
					можно использовать команду <code>file</code>, чтобы различать типы.
					Если в составе порта уже присутствует программный код для удаления
					исполняемых файлов, воспользуйтесь им (т. е. секцией 'install-strip');
					в противном случае добавьте соответствующие процедуры в Makefile.
					<br /><br />
				</p>
			</li>
			<li>
				<strong>Проверьте ещё раз порт на наличие проблем 
				с безопасностью.</strong>. Это особенно важно для сетевых
				и привилегированных программ. Ознакомьтесь с
				<a href="../porting.html#security">нашими рекомендациями</a>
				на эту тему. Опишите наиболее интересные особенности программы и 
				выпущенные авторами патчи в файле <code>pkg/SECURITY</code>. 
				Этот файл должен содержать исчерпывающую информацию 
				о потенциальных проблемах и патчах к ним, так, чтобы любой пользователь
				мог с первого взгляда понять, что ему необходимо сделать. Пример:
				<pre>      &#36;OpenBSD&#36;
		
      ${WRKDIR}/receiver.c
         call to mktemp (wrapper function do_mktemp) does seem to be correct.

      The server makes extensive use of strlcpy/strlcat/snprintf.</pre>
			</li>
			<li>
				Сформируйте файл pkg/PLIST. После того как инсталляция будет завершена, 
				используйте команду <b>make plist</b>, которая создаст файл PLIST 
				в каталоге <i>pkg</i>. Таким образом, вы получите предварительный список
				файлов пакета.
				<p>
					Внимание! Идентификация файлов производится по времени их последнего изменения.
					Это означает, что:
					<ul>
						<li>
							не будет создан список файлов, устанавливающихся через 'tar', 
							поскольку их время не изменяется, и они не могут быть найдены 
							с помощью 'find';
						</li>
						<li>
							не будет обновляться <code>info/dir</code>, если вы добавили новый .info  
							(убедитесь также, что <code>info/dir</code> не входит в PLIST);
						</li>
						<li>
							не будут сделаны специфические операции со связями и символическими ссылками
							(беглый анализ показывает, что большинство случаев отрабатываются
							корректно, и, кроме того, я не знаю, зачем вам может понадобиться
							что-то особенное, но всё же...).
						</li>
					</ul>
				</p>		
				<p>
					Внимательно ознакомьтесь с содержимым файла 'PLIST' и убедитесь,
					что все перечисленные в нём файлы установлены в правильные каталоги.
					Если необходимо установить какие-либо файлы дополнительно, 
					их можно добавить в раздел 'post-install' файла Makefile.
				</p>
				<p>
					Порты, которые устанавливают общие библиотеки, должны иметь в своём
					составе файл PFRAG.shared.
					<ul>
						<li>
							PLIST содержит список файлов, которые инсталлируются вне зависимости
							от того, поддерживает ли платформа общие библиотеки.
						</li>
						<li>
							В список PFRAG.shared следует вносить файлы, которые 
							устанавливаются только на платформах, поддерживающих общие библиотеки.
						</li>
						<li>
							Файл PFRAG.noshared представляет собой список файлов, предназначенных
							для платформ, не поддерживающих общие библиотеки.
						</li>
					</ul>
				</p>
			</li>
			<li>
				Повторяйте инсталляцию и деинсталляцию до тех пор, пока
				процесс не начнёт проходить безупречно.<br />
				<em>Безупречность</em> подразумевает установку всех файлов 
				в правильные каталоги. Для деинсталляции используйте команду 
				'pkg_delete &lt;pkg_name&gt;', а для повторной инсталляции - 
				'sudo make reinstall'.  Чтобы узнать, какие дополнительные команды
				можно добавить в PLIST для обеспечения "чистоты" установки, посмотрите 
				ман 'pkg_create'. Команда
				<p><code>find /usr/local -newer w-${PKGNAME}${FLAVOR_EXT}/fake-${MACHINE_ARCH}[-${FLAVOR}]/.install_started -print</code></p>
				<p>после деинсталляции должна выводить только стандартные системные каталоги.</p>
			</li>
			<li>
				Тестирование пакета:<br />
				После успешной инсталляции порта создайте пакет 
				командой <code>make package</code>. Чтобы протестировать
				его, выполните команду <code>pkg_delete</code>, а затем 
				<code>pkg_add</code>. Результат добавления пакета должен
				быть полностью идентичен результату работы команды 'make install'.
				<br /><br />
			</li>
			<li>
				Отправьте письмо в рассылку <a href="mailto:ports@openbsd.org">ports@openbsd.org</a> с кратким комментарием и просьбой о тестировании. Пришлите порт в виде вложенного файла к этому письму.
				<p>
					Не стесняйтесь отдавать свои проекты для тестирования тем,
					кто может проверить их работоспособность на нескольких платформах.
					<ul>
						<li>
							Компьютеры DEC Alpha интересны тем, что на них существуют только статичные
							библиотеки, и <code>sizeof(int) != sizeof(long)</code>.
						</li>
						<li>
							Sun SPARC - тоже хорошая платформа, поскольку на ней порядок 
							байтов инвертирован по сравнению с i386. Если вы разрабатываете 
							программы на SPARC, не забудьте протестировать их на i386, и наоборот. 
						</li>
					</ul>
				</p>
			</li>
			<li>
				Обращайте внимание на отзывы, которые вам присылают. Тестируйте
				проект снова и снова на своём компьютере. Предлагайте тем, кто
				присылает вам отзывы, протестировать новые версии вашего порта.
				<br /><br />
			</li>
			<li>
				Настало время добавить ваш проект в дерево портов.<br />
				Если у вас нет доступа к CVS, попросите сделать это кого-нибудь из рассылки
				<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.  
				<br /><br />
			</li>
			<li>
				Если вы участвуете в разработке OpenBSD, и у вас есть доступ на запись 
				в CVS, поместите порт туда. Для размещения новых портов лучше использовать
				команду import, чтобы не добавлять множество файлов по отдельности.
				При этом будут использованы номера версий типа 1.1.1.1, но вы можете 
				не обращать на это внимания. :-) Если вы измените какой-нибудь отдельный
				файл (отредактируете и выполните cvs commit), он получит номер 1.2, с которым
				уже можно работать.
				
				<p>
					Другими словами, использование import - стандартная операция при создании порта.
					Когда порт создан, можно использовать команды cvs add и cvs rm для управления
					файлами, а также стандартный цикл из редактирования и операции commit для внесения изменений.
					Вам нужно действовать примерно так:
				</p>
				<pre>
cd kaffe1
make clean	# вы ведь не хотите помещать в cvs всякий мусор, правда?
cvs -d cvs.openbsd.org:/cvs import -m 'kaffe port' ports/lang/kaffe1 \
	<I>YourName</I> <I>YourName_YYYY-MMM-DD</I></pre>
		
				<ul>
					<li>
						Опция -d cvs.openbsd.org:/cvs указывает адрес сервера cvs. Это можно опустить, если
						вы уже установили адрес в переменной CVSROOT.
					</li>
					<li>
						-m 'kaffe port' - текстовое сообщение (login message).
						Впишите сюда то, что вам больше нравится.
					</li>
					<li>
						ports/lang/kaffe1 - путь к порту относительно /cvs.
					</li>
					<li>
						<i>YourName</i> (замените на ваш логин) - ваш идентификатор ('vendor tag').
						Вы получили его как разработчик программ для OpenBSD.
					</li>
					<li>
						<i>YourName_YYYY-MMM-DD</i> (например, ian_2000-Jan-01) -
						идентификатор релиза ('vendor release tag').<br /><br />
					</li>
				</ul>
		
				Например, вот так 8 сентября 1998 года в репозиторий был
				помещён порт Kaffe1:
				<pre>
$ cd kaffe1
$ make clean >/dev/null
$ cvs import -m 'kaffe1.0(==JDK1.1) port' ports/lang/kaffe1 ian ian_1998-Sep-08
ian@cvs.openbsd.org's password: (not shown, obviously)
I ports/lang/kaffe1/CVS
I ports/lang/kaffe1/files/CVS
I ports/lang/kaffe1/pkg/CVS
N ports/lang/kaffe1/Makefile
cvs server: Importing /cvs/ports/lang/kaffe1/files
N ports/lang/kaffe1/files/md5
cvs server: Importing /cvs/ports/lang/kaffe1/pkg
N ports/lang/kaffe1/pkg/COMMENT
N ports/lang/kaffe1/pkg/DESCR
N ports/lang/kaffe1/pkg/PLIST

No conflicts created by this import
$</pre>
		
			</li>
			<li>
				И, наконец, не забудьте добавить строку, описывающую ваш новый порт,
				в файле Makefile родительского каталога. Например, если ваш проект
				находится в каталоге ports/lang/kaffe1, то речь идёт о файле 
				ports/lang/Makefile.<br /><br />
			</li>
			<li>
				Обновляйте ваш проект! С течением времени возникают разнообразные 
				проблемы и появляются новые версии программного обеспечения.
				Старайтесь поддерживать порт в актуальном состоянии. Другими словами
				- обновлять, тестировать, тестировать, обновлять...<br /><br />
			</li>
			<li>
				Помните о том, что порты взаимозависимы, и
				вам не следует допускать изменений, приводящих
				к неработоспособности других портов. Если это всё-таки необходимо,
				свяжитесь с разработчиками зависящих от вас проектов и решите
				проблемы вместе. Не забывайте отвечать на аналогичные
				запросы по поводу ваших программ.
			</li>
		</ol>
		 
		Спасибо вам за разработку портов для OpenBSD!

		<hr>
		<a href="index.html"><img height=24 width=24 src="../back.gif" border=0 alt=Porting></a> 
		<a href="mailto:www@openbsd.org">www@openbsd.org</a>
		<br />
		<small>
			Originally [OpenBSD: checklist.html,v 1.44 ]<br />
			$RuOBSD$<br />
			$Translation$<br />
			$OpenBSD$
		</small>
	</body>
</html>
