<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta name="resource-type" content="document">
<meta name="description" CONTENT="How OpenBSD can make use of the FreeBSD ports">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="copyright 1997-1999 by the OpenBSD project">
<title>Программное обеспечение для OpenBSD</title>
<link rev="made" HREF="mailto:www@openbsd.org">
<body text="#000000" bgcolor="#FFFFFF" link="#23238E">

<img height=30 width=141 src=../images/smalltitle.gif alt="[OpenBSD]" >

<h2><font color=#e00000>Программное обеспечение для OpenBSD</font><hr></h2>

<h3><font color=#0000e0>Введение</font></h3>
Имеется много программного обеспечения, которое хотелось бы видеть включенным
в состав OpenBSD. Но тут возникают различные проблемы: что включить, а что
нет, случайное лицензирование, экспортные ограничения. Как планируется, OpenBSD
должна быть маленькой, автономной UNIX-подобной системой, и многие вещи
не могут поставляться с системой.

<p>
<strong><font color=#e00000>
Порты и пакеты НЕ проходят полную ревизию защиты, за которой следует OpenBSD.
Хотя мы стремимся сохранить высокое качество портов и пакетов, мы не имеем достаточно
людей, чтобы гарантировать тот же самый уровень отказоустойчивости и защиты.
</font></strong>

<p>
Дерево портов, первоначально заимствованное от <a href="http://www.freebsd.org/">FreeBSD</a>,
заполняет этот промежуток. Принцип в том, чтобы каждое программное
обеспечение содержало управляющий Makefile, в котором находится информация:

<ul>
<li>где взять ПО,
<li>как взять ПО,
<li>какие зависимости имеет ПО,
<li>как внести исправления в исходной код ПО,
<li>как сконфигурировать и установить ПО.
</ul>
Вся эта информация хранится в иерархии каталогов /usr/ports.

<p>
Пакеты - бинарный эквивалент портов. Компилируемый порт становится
пакетом, который потом может быть установлен в системе, используя
утилиту pkg_add(1).

<p>
<strong><font color=#e00000>
Пакеты выглядят как простые архивы <code>.tgz</code>, но они должны устанавливаться, используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>,
так как содержат дополнительную информацию, которую только
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a>
знает, как обработать.</font></strong><br>
Совет: Чтобы отличить пакет от <strong>.tgz</strong> архива воспользуйтесь утилитой
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&sektion=1&format=html">pkg_info(1)</a>.

<h3><font color=#0000e0>Где можно найти готовое к использованию программное обеспечение (пакеты)</font></h3>

Готовое к использованию программное обеспечение (пакеты) можно найти:
<ul>
<li>На CD диске (который вы можете заказать <a href="orders.html">здесь</a>),
<li>Используя анонимный доступ к <a href=ftp.html>ftp-серверам</a>.
<li>Используя веб броузер:
<ul>
<li><a href="http://www.openbsd.org/2.8_packages/">Программное обеспечение для OpenBSD версии 2.8</a>
<li><a href="http://www.openbsd.org/2.7_packages/">Программное обеспечение для OpenBSD версии 2.7</a>
</ul>
</ul>

Пакеты устанавливаются с помощью утилиты <code>pkg_add(1)</code>.
Если вы устанавливаете пакет с ftp-сервера, определите переменную окружения
PKG_PATH на URL источника, для удовлетворения зависимостей.
<p>
Например, чтобы установить пакет gimp для версии 2.7 (i386)
с ftp-сервера (включая зависимости):

<pre>
    # setenv PKG_PATH ftp://ftp.openbsd.org/pub/OpenBSD/2.7/packages/i386/
    # pkg_add ${PKG_PATH}gimp-1.1.17.tgz
</pre>

<h3><font color=#0000e0>Управление установленным программным обеспечением</font></h3>

Страница руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&sektion=7&format=html">packages(7)</a>
содержит дополнительную информацию о способах управления установленным программным обеспечением.
<p>
Чтобы обновить установленное ПО вы должны:
<ul>
<li>Удалить старое ПО с помощью утилиты
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&sektion=1&format=html">pkg_delete(1)</a> 
<li>Добавить новое ПО с помощью утилиты
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1&format=html">pkg_add(1)</a> 
</ul>
Это слегка неудобно, поскольку ПО может вызывать зависимости, и вам,
вероятно, придется вручную удалять большой набор пакетов для дальнейшего их обновления.

<h3><font color=#0000e0>Адаптированное программное обеспечение (порты)</font></h3>

Если какой-то пакет не существует под вашу платформу, вы можете использовать
адаптированное программное обеспечение (порты) для создания и установки этого
пакета. Кроме того, некоторые пользователи, все программное обеспечение
устанавливают из портов по различным на то причинам.

<p>
Вы можете получить адаптированное ПО используя анонимный доступ к <a href=ftp.html>ftp-серверам</a>.
Мы включаем отлаженное, прошедшее длительное тестирование, адаптированное программное обеспечение на наш CD диск.
Полная информация доступна на странице руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&sektion=7&format=html">ports(7)</a>.

<h3><font color=#0000e0>Обновление портов</font></h3>

<p>
Дерево портов, подобно остальной части OpenBSD, постоянно изменяется.
Цикл жизни дерева портов:
<ul>
<li>''Живет'' в течение нескольких месяцев после того, как выйдет релиз OpenBSD. 
<li>''Оживает'' за два месяца, перед следующим релизом OpenBSD.
</ul>
Изменение состояния публикуется в <a href=mail.html>списках рассылки</a>.

<p>
Текущее дерево портов <strong>не может</strong> использоваться с предыдущим
релизом OpenBSD, как только оно ''умирает''. Это из-за значительных изменений,
которые требуют текущего исходного кода OpenBSD. Чтобы получить самую последнюю
версию дерева портов, которое будет работать с предыдущим релизом OpenBSD:

<ul>
<li>Определите дату ''смерти'' дерева портов. Например: ''смерть''
между 2.7 и 2.8 была обозначена сообщением в списке рассылок ports@openbsd.org
16 августа, 2000.
<li>Обновите ваше дерево портов до даты ''смерти''. Шаги
(предполагается, что ваше дерево портов ранее было получено с помощью анонимного
cvs и находится в /usr/ports): 
<pre>
    $ cd /usr/ports
    $ cvs -q -d anoncvs@some.anon.server:/cvs up -D 08/15/00 -Pd
</pre>
    Измените имя сервера и даты ''смерти'', для вашей конфигурации.
</ul>
<p>
Так же, можно просто указать тэг (порты для 2.7):
<pre>
    $ cd /usr/ports
    $ cvs -q -d anoncvs@some.anon.server:/cvs up -r OPENBSD_2_7 -Pd
</pre>
Тэг OPENBSD_2_7 подразумевает, что порты будут работать в OpenBSD версии 2.7,
но они не обязаны быть "стабильными" (те, которые поставляются на CD). Сюда
же могут вносится заплаты связанные с безопасностью.

<p>
Дерево портов работает как одно целое. Обновления одиночного каталога
не гарантирует, что все будет работать, поскольку зависимости пакета
могут вынуждать вас обновлять кучу других каталогов. Если вы не хотите
дополнительных проблем, отслеживайте время жизни дерева.
<a href=mail.html>Списки рассылки</a>, такие как <code>source-changes@openbsd.org</code> или
<code>tech@openbsd.org</code> могут быть неоценимы.

<p>
Текущее дерево портов можно получить используя:
<ul>
<li><a href=anoncvs.html>Анонимный CVS</a>. Команда: <strong>cvs get ports</strong>.
<li>Анонимный ftp-сервер
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz">
ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz</a>.
	Этот архив обновляется каждую ночь.
<li><a href="cvsup.html">CVSup</a>. См. пример для использования CVSup в <a href="cvsup.html#checkout">режиме проверки</a>.
<li>Веб броузер, <a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/">CVS web-интерфейс</a>.
</ul>

<h3><font color=#0000e0>Порты и XFree</font></h3>
В файлах конфигурации XFree, есть некое "волшебство", которое
позволяет устанавливать X-приложения в /usr/local. Это "волшебство" не
будет работать с версией XFree 4.0.x. Для этого воспользуйтесь заплатой
находящейся в /usr/ports/infrastructure/patches/patch-xfree-4.0.

<h3><font color=#0000e0>Примеры использования дерева портов</font></h3>

<p>
Для установки приложения <strong>unzip</strong> из коллекции портов введите команды:

<pre>
    % cd /usr/ports/archivers/unzip
    % su
    # make
    # make install
    # exit
</pre>

Просто? Теперь рассмотрим что скрыто за этими операциями:
<ul>
<li>забираем архив исходных текстов unzip с ftp-сервера,
<li>проверяем целостность архива,
<li>распаковываем архив,
<li>добавляем дополнительные заплаты OpenBSD,
<li>конфигурируем и строим программу,
<li>создаем бинарный пакет в /usr/ports/packages,
<li>устанавливаем данный пакет.
</ul>

<p>
В OpenBSD версии 2.7, большинство портов при установке автоматически создают
пакеты. В текущей версии OpenBSD почти все порты следуют за этим правилом.

<p>
По мере установки приложений из коллекции портов, каталог /usr/ports/distfiles
будет заполняется архивами исходных текстов этих приложений, а /usr/ports/packages
двоичными пакетами. Обратите внимание, что CD диск с OpenBSD содержит
только дерево портов и некоторые выбранные пакеты.

<h3><font color=#0000e0>Создание новых портов</font></h3>
<p>
Если вы заинтересованы в расширении коллекции портов OpenBSD,
прочитайте <a href="../porting.html">porting.html</a>.

<h3><font color=#0000e0>Связь</font></h3>

<p>
Если у вас возникли проблемы с существующими портами, или вы нуждаетесь в дополнительной
информации по поводу создания новых портов, воспользуйтесь рассылкой
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>. Исправления и 
дополнения всегда приветствуются, но в любом случае, пожалуйста, обеспечивайте:
<ul>
<li>вывод <code>uname -a</code>,
<li>версию OpenBSD, включая заплаты, которые вы установили,
<li>полное описание проблемы.

</ul>

<hr>
<a href="index.html"><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@openbsd.org>www@openbsd.org</a>
<br><small>
Originally [OpenBSD: ports.html,v 1.42 2000/10/27 14:15:38 jufi Exp]<br>
$RuOBSD$<br>
$Translation$<br>
$OpenBSD$
</small>
</body>
</html>
