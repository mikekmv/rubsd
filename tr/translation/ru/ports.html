<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta name="resource-type" content="document">
<meta name="description" content="The OpenBSD Ports and Packages Collection">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="copyright 1997-2001 by the OpenBSD project">
<title>OpenBSD Ports and Packages</title>
<link rev="made" href="mailto:www@openbsd.org">
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#23238E">

<img height=30 width=141 src=../images/smalltitle.gif alt="[OpenBSD]" >

<h2><font color="#e00000">Программное обеспечение для OpenBSD</font></h2>

<hr>

<h3><font color="#0000e0">Введение</font></h3>

Существует огромное количество программного обеспечения, которое хотелось бы
видеть включенным в состав OpenBSD. В связи с этим возникают различные
проблемы: что включать в OpenBSD, а что нет, случайное лицензирование,
экспортные ограничения. Как планируется, OpenBSD должна быть маленькой,
автономной UNIX-подобной системой, и многие вещи просто не могут поставляться
с системой.

<p>
<strong><font color="#e00000">
Порты и пакеты НЕ проходят полную ревизию защиты, за которой следует OpenBSD.
Хотя мы стремимся сохранить высокое качество портов и пакетов, мы не имеем
достаточно разработчиков, чтобы гарантировать тот же самый уровень
отказоустойчивости и защиты.
</font></strong>

<p>
Дерево портов, первоначально заимствованное от
<a href="http://www.freebsd.org/">FreeBSD</a>, заполняет этот промежуток.
Принцип в том, чтобы к каждому программному обеспечению формировался
управляющий Makefile, в котором содержится информация:
<ul>
<li>где его взять,
<li>каким образом его взять,
<li>какие зависимости имеет (если имеет),
<li>как внести исправления в его исходной код (если нужно),
<li>как сконфигурировать, собрать и установить его.
</ul>
Вся эта информация хранится в иерархии каталогов /usr/ports.

<p>
Пакеты - бинарный эквивалент портов. Компилируемый порт становится пакетом,
который потом может быть установлен в системе, используя утилиту pkg_add(1).

<p>
<strong><font color="#e00000">
Пакеты выглядят как простые <code>.tgz</code> архивы, но они должны
устанавливаться, используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>, 
так как содержат дополнительную информацию, которую только
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> 
знает, как обработать.</font></strong>
Совет: чтобы отличить пакет от <strong>.tgz</strong> архива воспользуйтесь
утилитой
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;format=html">pkg_info(1)</a>.

<h3><font color="#0000e0">Где можно найти готовое к использованию программное обеспечение (пакеты)</font></h3>

Большое количество предварительно откомпилированных пакетов доступно
для основных архитектур.
<ul>
<li>На CD диске (который вы можете заказать <a href="../orders.html">здесь</a>),
<li>На <a href=ftp.html>ftp серверах</a>.
<li>Просматривая и извлекая с web
<ul>
<li><a href="http://www.openbsd.org/2.8_packages/">Пакеты для OpenBSD 2.8</a>
<li><a href="http://www.openbsd.org/2.7_packages/">Пакеты для OpenBSD 2.7</a>
</ul>
</ul>

Пакеты устанавливаются с помощью команды <code>pkg_add pkgname.tgz</code>.
Если вы устанавливаете пакет с какого-нибудь источника (хранилища) пакетов,
определите переменную окружения PKG_PATH на URL источника, для удовлетворения
зависимостей.

<p>
Например, чтобы установить пакет gimp для версии 2.8 на i386
с ftp-сервера (включая зависимости):

<pre>
    # setenv PKG_PATH ftp://ftp.openbsd.org/pub/OpenBSD/2.8/packages/i386/
    # pkg_add ${PKG_PATH}gimp-1.1.27.tgz
</pre>

<h3><a name="stable"><font color="#0000e0">Обновление портов и пакетов для релиза OpenBSD</font></a></h3>
<p>
Впервые, при релизе 2.7 была создана стабильная ветка для дерева портов.
<p>
Например, чтобы взять порты из стабильной ветки для релиза 2.8:
<pre>
    $ cd /usr/ports
    $ cvs -q -d anoncvs@some.anon.server:/cvs up -r OPENBSD_2_8 -Pd
</pre>
<p>
Начиная с версии 2.8, выбранные бинарные пакеты также доступны. Особое
спасибо <a href="mailto:naddy@openbsd.org">Christian Weisgerber</a>, который
взял на себя координирование изменений стабильной ветки. Обратитесь к <a
href="../pkg-stable.html">этой</a> странице, если хотите получить информацию
об обновленных пакетах и важных изменений касающихся стабильной ветви.
</p>
<p>
Имена пакетов <strong>всегда</strong> изменяются при их обновлении,
чтобы избежать путаницы между пакетами из релиза и пакетами, в которых
исправлены ошибки.
</p>

<h3><font color="#0000e0">Управление установленным программным обеспечением</font></h3>

Страница руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&amp;sektion=7&amp;format=html">packages(7)</a>
содержит полезную информацию о способах управления установленным программным
обеспечением, разрешении конфликтов (файлы которые уже существуют) и обработка
зависимостей.
<p>
Чтобы обновить установленный пакет вы должны:
<ul>
<li>Удалить старый пакет используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;format=html">pkg_delete(1)</a> 
<li>Добавить новый пакет используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> 
</ul>
Это слегка неудобно, поскольку пакет может вызывать зависимости, и вам,
вероятно, придется вручную удалять большое количество пакетов для дальнейшего
их обновления.

<h3><font color="#0000e0">Использование портов</font></h3>

Если какой-то пакет не создан под вашу архитектуру, вы все еще можете
использовать адаптированное программное обеспечение (порты) для
компилирования этого пакета. Кроме того, по различным причинам, некоторые
пользователи, компилируют все программное обеспечение из исходников.

<p>
Вы можете получить версию релиза находящеюся в каталоге pub/OpenBSD/[версия]
(где, [версия] - номер релиза) с любого <a href=ftp.html>ftp сервера</a>.
Версия релиза так же содержится на нашем CD диске, и проходит больше тестов,
чем любой снапшот. Дополнительная информация доступна на странице руководства
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&sektion=7&format=html">ports(7)</a>.

<h3><font color="#0000e0">Жизненный цикл дерева портов</font></h3>

<p>
Дерево портов, подобно остальной части OpenBSD, постоянно изменяется.
Обычный жизненный цикл дерева портов:
<ul>
<li>Сопровождается в течение нескольких месяцев после выхода релиза OpenBSD.
<li>Начинает сопровождается в OpenBSD-current за две недели перед следующим
релизом.
</ul>
Изменение состояния публикуется в
<a href=mail.html>списках рассылки</a>.

<p>
Текущее дерево портов <strong>не может</strong> использоваться с предыдущим
релизом OpenBSD, как только оно переключается на слежение OpenBSD-current.
Это из-за значительных изменений, в основном в процессе построения портов,
которые требуют текущего исходного кода OpenBSD.
<p>Дерево портов работает как одно целое. Обновления одиночного каталога
не гарантирует, что все будет работать, поскольку зависимости пакета могут
заставить вас обновить и другие каталоги.
Если вы не хотите дополнительных проблем, отслеживайте время жизни дерева
портов.
<a href=mail.html>Списки рассылки</a>, такие как
<code>source-changes@openbsd.org</code> или
<code>tech@openbsd.org</code> могут быть неоценимы.

<p>Список <a href="portsplus.html">ежедневных изменений</a> в портах.

<p>
Текущее дерево портов можно получить через:
<ul>
<li><a href=anoncvs.html>Анонимный CVS</a> (см линк).
Команда <strong>cvs get ports</strong>.
<li>Анонимный ftp с
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz">
ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz</a>.
	Обновляется каждую ночь.
<li><a href="cvsup.html">CVSup</a>. Смотрите пример использования CVSup в
    <a href="cvsup.html#checkout">режиме извлечения</a>.
<li>Веб броузер, 
<a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/">CVS
	web-интерфейс</a>.
</ul>

<h3><font color="#0000e0">Порты и XFree</font></h3>
В файлах конфигурации XFree OpenBSD, есть некое "волшебство", которое
позволяет устанавливать imake-основанные приложения в /usr/local.

<p>С текущей версией OpenBSD XFree 4.0.x не поставляется по различным причинам.
Это "волшебство" портов не будет работать с версией XFree 4.0.x (пока что).
Вы должны воспользоваться заплатой находящейся в
<code>/usr/ports/infrastructure/patches/patch-xfree-4.0</code>,
чтобы заставить работать дистрибутив XFree 4.0.x с деревом портов OpenBSD.

<p>Будущие релизы XFree 4.0.x вероятно будут включать необходимое "волшебство".

<h3><font color="#0000e0">Пример использования дерева портов</font></h3>

<p>
Предположим у вас уже имеется дерево портов и вы лишь хотите откомпилировать и
установить утилиту <strong>unzip</strong>. Вы должны сделать следующее:

<pre>
    % cd /usr/ports/archivers/unzip
    % su
    # make
    # make install
    # exit
</pre>

Просто? Теперь рассмотрим, что скрыто за этими операциями:
<ul>
<li>Забираем архив исходных текстов unzip с ftp-сервера,
<li>Проверяем целостность архива,
<li>Распаковываем архив,
<li>Добавляем дополнительные заплаты OpenBSD,
<li>Конфигурируем и строим программу,
<li>Создаем бинарный пакет в /usr/ports/packages,
<li>Устанавливаем этот пакет.
</ul>

<p>
В OpenBSD 2.8 почти все порты при установке автоматически
создают пакеты.

<p>
По мере установки приложений из коллекции портов, каталог /usr/ports/distfiles
будет заполняться архивами исходных текстов этих приложений, а
/usr/ports/packages двоичными пакетами. Пользователи с ограниченной возможностью
соединений могут обратится к mirror-distfiles(7), где описан эффективный
способ для получения всех distfiles за раз. В OpenBSD-current, вы можете
использовать скрипт /usr/ports/infrastructure/fetch/clean-old, чтобы
отслеживать старые distfiles.
Заметьте, что CD диск с OpenBSD содержит только дерево портов и некоторые
выбранные пакеты. Если вы хотите также иметь и distfiles, вы должны получить
их другим путем.

<h3><font color="#0000e0">Создание новых портов</font></h3>
<p>
Если вы заинтересованы в расширении коллекции портов OpenBSD, для начала
вы должны прочитать <a href="../porting.html">porting.html</a>. Эта
страница первоначально была взята из раздела портирования в
<a href="http://www.freebsd.org/handbook/">FreeBSD handbook</a>
и уже к ней была добавлена специфичная для OpenBSD политика и советы.

<h3><font color="#0000e0">Проблемы и связь</font></h3>

<p>
Если у вас возникли проблемы с существующими портами, или вы нуждаетесь в
информации для создания новых портов, воспользуйтесь рассылкой
<a href="mailto:ports@openbsd.org">ports@openbsd.org</a>. Исправления
всегда приветствуются, но в любом случае, пожалуйста, предоставьте:
<ul>
<li>Вывод <code>uname -a</code>,
<li>Версию OpenBSD, включая заплаты, которые вы добавили,
<li>Полное описание проблемы.
</ul>
Для портов, которые не строятся корректно, включите информацию, выводимую
при их построении. Некоторые порты могут быть связаны с чем-то, что уже
должно быть на вашей машине.
<ul>
<li>Используйте <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&amp;sektion=1&amp;format=html">script(1)</a> чтобы создать файл с информацией выводимой при построении порта. Не удаляйте информацию о конфигурировании.
    <li>Включите вывод <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&sektion=1&format=html">pkg_info(1)</a>, если вы считаете, что он поможет.
    <li>Внутренние ошибки компилятора <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1&format=html">gcc(1)</a> могут попросить вас сообщить о них в список рассылки gcc.
При соблюдении их инструкций вы сэкономите ваше драгоценное время. Предоставьте
несколько файлов полученных при <tt>gcc -save-temps</tt>.
</ul>

<hr>
<a href="index.html"><img height=24 width=24 src=../images/back.gif border=0 alt=OpenBSD></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br><small>
Originally [OpenBSD: ports.html,v 1.47 2001/02/18 15:23:35 naddy Exp]<br>
$RuOBSD$<br>
$Translation$<br>
$OpenBSD$
</small>
</body>
</html>
