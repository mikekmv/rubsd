<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta name="resource-type" content="document">
<meta name="description" content="The OpenBSD Ports and Packages Collection">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="copyright 1997-2002 by OpenBSD">
<title>Программное обеспечение для OpenBSD</title>
<link rev="made" href="mailto:www@openbsd.org">
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#23238E">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">Программное обеспечение для OpenBSD</font></h2>

<hr>

<h3><font color="#0000e0">Оглавление</font></h3>
<ul>
<li><a href="#Motivation">Введение</a></li>
<li><a href="#Get">Получение пакетов</a></li>
<li><a href="#stable">Обновление портов и пакетов для релиза OpenBSD</a></li>
<li><a href="#Manage">Управление установленными пакетами</a></li>
<li><a href="#Use">Использование портов</a></li>
<li><a href="#Life">Жизненный цикл дерева портов</a></li>
<li><a href="#XFree86">Порты и XFree86</a></li>
<li><a href="#Example">Пример использования дерева портов</a></li>
<li><a href="#Advanced">Расширенное использование дерева портов</a></li>
<li><a href="#Create">Создание новых портов</a></li>
<li><a href="#Lag">Когда порт не обновляется</a></li>
<li><a href="#Help">Проблемы и обратная связь</a></li>
</ul>

<hr>

<h3><font color="#0000e0"><a name="Motivation">Введение</a></font></h3>

Существует огромное количество программного обеспечения, которое хотелось бы
видеть включенным в состав OpenBSD. В связи с этим возникают различные
проблемы: что включать в OpenBSD, а что нет, случайное лицензирование,
экспортные ограничения. Как предполагается, OpenBSD должна быть маленькой,
автономной UNIX-подобной системой, и многие вещи не могут поставляться с
системой.

<p>
<strong><font color="#e00000">
Порты и пакеты НЕ проходят полную ревизию защиты, за которой следует OpenBSD.
Хотя мы стремимся сохранить высокое качество портов и пакетов, мы не имеем
достаточно разработчиков, чтобы гарантировать тот же самый уровень
отказоустойчивости и защиты.
</font></strong>

<p>
Дерево портов, первоначально заимствованное от
<a href="http://www.freebsd.org/">FreeBSD</a>, заполняет этот промежуток.
Концепция в том, чтобы к программному обеспечению третьего лица
формировался управляющий Makefile, который содержит директивы
<ul>
<li>где его взять,
<li>каким образом взять,
<li>какие зависимости имеет (если имеет),
<li>как внести исправления в исходной код (если нужно),
<li>как сконфигурировать, собрать и установить его.
</ul>
Вся эта информация хранится в иерархии директорий /usr/ports.

<p>
Пакеты - бинарный эквивалент портов. Компилируемый порт становится пакетом,
который потом может быть зарегистрирован в системе, используя утилиту
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>

<p>
<strong><font color="#e00000">
Пакеты выглядят, как простые <code>.tgz</code> архивы, но они должны
устанавливаться, используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a>, 
так как содержат дополнительную информацию, которую только
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> 
знает, как обработать.</font></strong>
Совет: чтобы отличить пакет от <strong>.tgz</strong> архива воспользуйтесь
утилитой <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;format=html">pkg_info(1)</a>.

<h3><font color="#0000e0"><a name="Get">Получение пакетов</a></font></h3>

Большое количество предварительно скомпилированных пакетов доступно для
большинства распространенных архитектур.
<ul>
<li>На CD диске (который вы можете заказать <a href="../orders.html">здесь</a>),
<li>На <a href="ftp.html">ftp серверах</a>,
<li>Просматривая и копируя их с web:
<ul>
<li><a href="http://www.openbsd.org/3.2_packages/">Пакеты для OpenBSD 3.2</a>
<li><a href="http://www.openbsd.org/3.1_packages/">Пакеты для OpenBSD 3.1</a>
<li><a href="http://www.openbsd.org/3.0_packages/">Пакеты для OpenBSD 3.0</a>
<li><a href="http://www.openbsd.org/2.9_packages/">Пакеты для OpenBSD 2.9</a>
<li><a href="http://www.openbsd.org/2.8_packages/">Пакеты для OpenBSD 2.8</a>
<li><a href="http://www.openbsd.org/2.7_packages/">Пакеты для OpenBSD 2.7</a>
</ul>
</ul>


Пакеты устанавливаются с помощью команды <code>pkg_add pkgname.tgz</code>.
Если вы устанавливаете пакет с какого-нибудь единого источника (хранилища
пакетов), установите переменную окружения PKG_PATH на URL источника, для
удовлетворения зависимостей.

<p>
Например, чтобы установить пакет Gimp для версии 3.2 на i386
с ftp-сервера (включая зависимости):

<pre>
    # setenv PKG_PATH ftp://ftp.openbsd.org/pub/OpenBSD/3.2/packages/i386/
    # pkg_add ${PKG_PATH}gimp-1.2.3.tgz
</pre>

<h3><font color="#0000e0"><a name="stable">Обновление портов и пакетов для
релиза OpenBSD</a></font></h3>
<p>
Впервые, в релизе 2.7 была создана ветка stable для дерева портов.
<p>
Например, чтобы получить порты для релиза 3.2 из этой ветви:
<pre>
    $ cd /usr/ports
    $ cvs -q -d anoncvs@some.anon.server:/cvs up -r OPENBSD_3_2 -Pd
</pre>
<p>
Начиная с версии 2.8, некоторые бинарные пакеты также доступны. Обратитесь
к этой <a href="../pkg-stable.html">странице</a>, если хотите получить
информацию об обновленных пакетах и важных изменениях касающихся ветви stable.
</p>
<p>
Имена пакетов <strong>всегда</strong> изменяются при их обновлении, чтобы
избежать путаницы между пакетами релиза и пакетами, в которых исправлены
ошибки.
</p>

<h3><font color="#0000e0"><a name="Manage">Управление установленными пакетами
</a></font></h3>

Страница руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&amp;sektion=7&amp;format=html">packages(7)</a> 
содержит информацию об управлении установленным программным обеспечением,
разрешении конфликтов (файлы которые уже существуют) и обработке
зависимостей.
<p>
Чтобы обновить установленный пакет вы должны:
<ul>
<li>Удалить старый пакет используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_delete&amp;sektion=1&amp;format=html">pkg_delete(1)</a> 
<li>Добавить новый пакет используя
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&amp;sektion=1&amp;format=html">pkg_add(1)</a> 
</ul>
Это слегка неудобно, поскольку пакет может вызывать зависимости, и вам,
вероятно, придется вручную удалять большое количество пакетов для дальнейшего
их обновления.

<h3><font color="#0000e0"><a name="Use">Использование портов</a></font></h3>

Если какой-то пакет не создан под вашу архитектуру, вы можете скомпилировать
порт. Кроме того, некоторые пользователи, по различным причинам, компилируют
все программное обеспечение из исходных текстов.

<p>
Вы можете получить релиз версию портов с любого <a href=ftp.html>ftp
сервера</a> из директории pub/OpenBSD/[версия] (где, [версия] - номер
релиза). Релиз версия так же содержится на нашем CD диске, и проходит
больше тестов, чем любой снапшот. Дополнительная информация доступна на
странице руководства
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ports&amp;sektion=7&amp;format=html">ports(7)</a>.

<h3><font color="#0000e0"><a name="Life">Жизненный цикл дерева портов</A>
</font></h3>

<p>
Дерево портов, подобно остальной части OpenBSD, постоянно изменяется.

<p>
Текущее дерево портов <strong>не может</strong> использоваться с предыдущим
релизом OpenBSD. Это из-за значительных изменений, обычно в процессе
построения портов, которые требуют текущего исходного кода OpenBSD.
<p>Дерево портов работает как одно целое. Обновление одиночного каталога
не гарантирует, что все будет работать, поскольку зависимости пакета могут
заставить вас обновить другие части дерева портов. Мы настоятельно
рекомендуем следить за состоянием дерева портов.
<a href=mail.html>Списки рассылки</a>,
такие как <code>source-changes@openbsd.org</code> или
<code>tech@openbsd.org</code> могут быть неоценимы.

<p>Мы советуем использовать стабильную версию портов на продуктивной машине
и постараемся содержать стабильное дерево портов в хорошем состоянии
относительно проблем, и предоставлять своевременные обновления бинарных
пакетов.

<p>Обратите внимание на то, что исчезающие distfiles не являются проблемой,
поскольку ftp.openbsd.org содержит все их копии. Изменение контрольных сумм,
также не является проблемой: вы можете использовать команду
<pre>
	make checksum REFETCH=true
</pre>
чтобы удостоверятся, что вы получаете правильный distfile для вашего дерева
портов.

Для определения, что из себя представляет текущая и стабильная версия, смотрите
<a href="../faq/upgrade-minifaq.html#1.1">Mini-FAQ по обновлению</a>.

<p>Список <a href="../portsplus/index.html">ежедневных изменений</a> в портах.

<p>
Текущее дерево портов можно получить через:
<ul>
<li><a href=anoncvs.html>Анонимный CVS</a> (см линк).
Команда: <strong>cvs get ports</strong>.
<li>Анонимный ftp,
<a href="ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz">
ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/ports.tar.gz</a>.
	Архив обновляется каждую ночь.
<li><a href="cvsup.html">CVSup</a>. Смотрите пример использования CVSup в
    <a href="cvsup.html#checkout">режиме извлечения</a>.
<li>Веб броузер,
<a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/">CVS
	web-интерфейс</a>.
</ul>

<h3><font color="#0000e0"><a name="XFree86">Порты и XFree86</a></font></h3>
В файлах конфигурации XFree86 содержится некое волшебство, позволяющее
дереву портов устанавливать приложения на базе imake в /usr/local.

<p>Начиная с 2.9, OpenBSD поставляется с XFree86 4.0.3
Если вы используете предыдущие дистрибутивы, вместе с бинарными файлами
XFree86, вам необходимо добавить патч
<code>/usr/ports/infrastructure/patches/patch-xfree-4.0</code>
в бинарный дистрибутив XFree86 4.0.x, для того, чтобы он корректно
работал с деревом портов OpenBSD

<h3><a name="Example"></a><font color="#0000e0">Пример использования дерева
портов</font></h3>

<p>
Скажем, у вас есть дерево портов и вы хотите скомпилировать и установить
утилиту <strong>unzip</strong>. Вы должны проделать следующее:

<pre>
    % cd /usr/ports/archivers/unzip
    % su
    # make
    # make install
    # exit
</pre>

Просто? Теперь рассмотрим, что скрыто за этими операциями:
<ul>
<li>Забираем архив исходных текстов unzip с ftp-сервера,
<li>Проверяем целостность архива,
<li>Распаковываем архив исходных текстов unzip,
<li>Добавляем характерные для OpenBSD исправления,
<li>Конфигурируем и строим программу,
<li>Создаем бинарный пакет в /usr/ports/packages,
<li>Устанавливаем этот пакет.
</ul>

<p>
В OpenBSD 3.0, при установке портов автоматически создаются пакеты.

<p>
По мере установки приложений из коллекции портов, директория
/usr/ports/distfiles заполняется архивами исходных текстов этих приложений,
а /usr/ports/packages двоичными пакетами. Пользователи с ограниченной
возможностью соединений могут обратится к странице руководства
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mirroring-ports&amp;sektion=7&amp;format=html">mirroring-ports(7)</a>
где описан эффективный способ для получения всех distfiles за раз. В
OpenBSD-current, вы можете использовать скрипт
/usr/ports/infrastructure/fetch/clean-old,
чтобы отслеживать старые distfiles.
Заметьте, что CD диск с OpenBSD содержит только дерево портов и некоторые
выбранные пакеты. Если вы хотите также иметь и distfiles, вы должны получить
их другим путем.

<h3><font color="#0000e0"><a name="Advanced"></a>Расширенное использование дерева портов</font></h3>

<p>
Дерево портов имеет множество возможностей для расширенного использования,
которые делают из него ценный инструмент. Пользователи могут изменять
makefile'ы (прочитайте страницы руководства
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1&amp;format=html">make(1)</a>)
или устанавливать различные переменные непосредственно в командной строке
make или в <tt>/etc/mk.conf</tt>. Детальное описание этих переменных можно
найти на странице руководства <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bsd.port.mk&amp;sektion=5&amp;format=html">bsd.port.mk(5)</a>
или в документации по портированию, указанной ниже.
</p>

<h3><font color="#0000e0"><a name="Create">Создание новых портов</a></font></h3>
<p>
Если вы заинтересованы в расширении дерева портов OpenBSD, прочитайте
<a href="../porting.html">porting.html</a>. Эта страница ссылается на 
<a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/porters-handbook/index.html">FreeBSD Porter's Handbook</a>
с специфичной для OpenBSD политикой и советами.

<h3><font color="#0000e0"><a name="Lag">Когда порт не обновляется</a></font></h3>

<p>
Коллекция портов - проект добровольцев. Иногда проект нуждается в разработчиках,
чтобы содержать все в обноленном состоянии. Обычно разработчики берутся за то,
что они считают интересным и что могут проверить в своем окружении. Ваши
<a href="goals.html#funding">пожертвования</a> так же влияют на каких
платформах порты могут быть протестированны.
</p>

<p>
Иногда, некоторые порты могут отставать от главной версии программы. Дерево
портов может иметь версию программы вышедшей в Январе, тогда как разработчик
программы выпустил новую версию в Мае, 3 месяца назад. Обычно это сознательное
решение; новая версия может иметь проблемы на OpenBSD, которые maintainer
пытается разрешить, или возможно новая версия хуже старой: OpenBSD может
иметь другие <a href="goals.html">задачи проекта</a>, отличные от задач
разработчика программы в другом проекте, которые иногда приводят к особенностям
в дизайне или структуре программы, которые являются нежелательными с точки
зрения разработчиков OpenBSD. Обновление порта так же может быть отложено
из-за того, что в новой версии нет существенных изменений.
</p>

<p>
Если вам действительно нужна новая версия порта, вы должны попросить
<tt>MAINTAINER'а</tt>, чтобы он обновил порт (см. <a href="#Help">ниже</a>,
как можно определить mainteiner'а); лучше будет если вы отошлете ему
необходимые исправления. Для корректного создания исправлений обратитесь
к <a href="../porting.html">документации по созданию портов</a>.
</p>

<h3><font color="#0000e0"><a name="Help">Проблемы и обратная связь</a></font></h3>

<p>
Если у вас возникли проблемы с существующими портами, пожалуйста напишите
e-mail maintainer'у порта. Для того, чтобы определить, кто является
mainteiner'ом порта:
<pre>
       % cd /usr/ports/archivers/unzip
       % make show VARNAME=MAINTAINER
</pre>
Если у порта нет maintainer'а, или он/она не отвечает, воспользуйтесь
списком рассылки <a href="mailto:ports@openbsd.org">ports@openbsd.org</a>.
Пожалуйста не используйте список рассылки misc@openbsd.org для вопросов
касающихся портов. Исправления всегда приветствуются, но в любом случае,
пожалуйста, предоставьте:
<ul>
<li>Вывод <code>uname -a</code>,
<li>Версию OpenBSD, включая заплаты, которые вы добавили,
<li>Полное описание проблемы.
</ul>
Для портов, которые не строятся корректно, включите информацию, выводимую
при их построении. Для этого вы можете использовать скрипт portslogger,
находящийся в /usr/ports/infrastructure/build. Пример запуска:

<pre>
       % cd /usr/ports/archivers/unzip
       % su
       # mkdir -p ~/portslogs
       # make clean install 2>&amp;1 | /usr/ports/infrastructure/build/portslogger \
               ~/portslogs
</pre>

После этого, вы получите файл содержащий процесс построения порта в 
директории ~/portslogs, который вы можете послать mainteiner'у порта.
Убедитесь, что вы не используйте дополнительных опций при построении,
например в /etc/mk.conf.

<p>
Вы так же можете
<ul>
<li>Использовать <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=script&amp;sektion=1&amp;format=html">script(1)</a>, чтобы создать файл с информацией выводимой при построении порта. Не удаляйте информацию конфигурирования.
    <li>Включите вывод <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_info&amp;sektion=1&amp;format=html">pkg_info(1)</a>, если вы считаете его уместным.
    <li>Внутренние ошибки компилятора <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1&amp;format=html">gcc(1)</a>
могут попросить вас сообщить о них в список рассылки gcc. При соблюдении их
инструкций вы сэкономите ваше время. Предоставьте несколько файлов
полученных с помощью <tt>gcc -save-temps</tt>.
</ul>

<hr>
<a href="index.html"><img height=24 width=24 src=../back.gif border=0
alt=OpenBSD></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: ports.html,v 1.72 ]<br>
$Translation$<br>
$OpenBSD$
</small>
</body>
</html>
