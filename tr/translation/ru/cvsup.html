<html>
<head>
<title>OpenBSD CVSup</title>
<link rev="made" href="mailto:www@openbsd.org" />
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta name="resource-type" content="document" />
<meta name="description" content="How to get OpenBSD updates via Internet using CVSup" />
<meta name="keywords" content="openbsd,cvsup,updates" />
<meta name="distribution" content="global" />
<meta name="copyright" content="This document copyright 2000 by OpenBSD." />
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#23238E">

<img alt="[OpenBSD]" height="30" width="141" src="../images/smalltitle.gif" />

<h2><font color="#e00000">CVSup</font></h2>
<hr />

<h3>Оглавление</h3>
<ul>
<li><a href="#cvsup">Что такое CVSup?</a></li>
<li><a href="#starting">Работа с CVSup</a></li>
<li><a href="#using">Использование CVS для обновления исходного кода</a></li>
<li><a href="#checkout">Запуск CVSup в режиме извлечения</a></li>
<li><a href="#CVSROOT">Доступные CVSup сервера</a></li>
</ul>

<hr />


<h3><a id="cvsup" name="cvsup"><font color="#0000e0">Что такое CVSup?</font></a></h3>

<p>
<b>CVSup</b> - это пакет программ позволяющий распространять и обновлять дерево
исходных текстов OpenBSD с сетевого CVS репозитория. Дерево исходных текстов
OpenBSD поддерживается разработчиками на центральной машине в Канаде. Используя
CVSup пользователь может легко содержать свое дерево исходных текстов в
новейшем состоянии.
</p>

<p>
<b>CVSup</b> использует, так называемую, вытягивающую модель обновления
исходных текстов. Под этой моделью подразумевается, что каждый CVSup клиент
запрашивает у сервера обновления. Сервер пассивно ожидает от клиента запрос.
Таким образом, все обновления провоцируются клиентом. Сервер никогда не
посылает данные, которые клиент не запрашивал. Пользователи же, должны
запускать <b>CVSup</b> клиент вручную или установить выполнение периодических
процессов с помощью cron.
</p>

<p>
Термин <b>CVSup</b>, относится к полному пакету программ.
Его главные компоненты: клиент <tt>cvsup</tt>, который запускается
на машине пользователя и сервер <tt>cvsupd</tt>, который запущен
на каждом CVSup сервере.
</p>

<p>
<b>CVSup</b> более эффективный  и более гибкий, чем его предшественник -
 <b>sup</b>.
</p> 

<p>
Проект OpenBSD в настоящее время имеет пять основных репозитория: 
</p>

<ul>
  <li><b>src</b> - весь исходный текст для OpenBSD.</li>
  <li><b>ports</b> - адаптированное программное обеспечение (<a
  href="./ports.html">порты</a>) под OpenBSD.</li>
  <li><b>www</b> - все веб страницы OpenBSD. (включая и эту).</li>
  <li><b>x11</b> - адаптированное под OpenBSD программное обеспечение <a
  href="http://www.XFree86.org/">XFree86-3</a>.</li>
  <li><b>xf4</b> - адаптированное под OpenBSD программное обеспечение <a
  href="http://www.XFree86.org/">XFree86-4</a>.</li>
</ul>

<h3><a id="CVS" name="CVS"><font color="#0000e0">Что такое CVS?</font></a></h3>

<p>
CVS - это система контроля версий, используется для управления исходными текстами системы.
Более подробно описано <a href="anoncvs.html#CVS">здесь</a>.
</p>

<h3>
<a id="starting" name="starting"><font color="#0000e0">Работа с CVSup</font></a>
</h3>

<p>
Последняя версия CVSup доступна на <a href="http://www.polstra.com/projects/freeware/CVSup/">
http://www.polstra.com/projects/freeware/CVSup/</a>.
</p>

<p>
CVSup написан на Modula-3. А так, как Modula-3 еще не портирован на OpenBSD,
порт клиента CVSup (net/cvsup-bin) находится в скомпилированном виде под i386
и sparc архитектуры и запускается под эмуляцией FreeBSD и SunOS.
</p>


<p>
Пример файла конфигурации:
</p>

<pre>
        # Defaults that apply to all the collections
        *default release=cvs
        *default delete use-rel-suffix
        *default umask=002
        *default host=cvsup.uk.OpenBSD.org
        *default base=/cvs
        *default prefix=/cvs

        # If your network link is a T1 or faster, comment out the following line.
        *default compress

        OpenBSD-all
        #OpenBSD-src
        #OpenBSD-www
        #OpenBSD-ports
        #OpenBSD-x11
        #OpenBSD-xf4
</pre>

<p>
Это заставляет CVSup скопировать весь исходной текст OpenBSD с
 <b>cvsup.uk.OpenBSD.org</b> с маской доступа (umask), разрешающей запись
 для группы.
</p>

<p>
Предположим этот файл конфигурации, сохранен как <tt>cvs-supfile</tt>,
следующая команда запустит CVSup в графическом режиме:
</p>
<pre>
        cvsup cvs-supfile
</pre>
<p>
Для запуска из скрипта или в терминале, используйте: 
</p>
<pre>
        cvsup -g -L 2 cvs-supfile
</pre>

<h3><a id="using" name="using">
<font color="#0000e0">Использование CVS для обновления исходного кода</font>
</a></h3>

<p>
Чтобы получить любой из CVSup репозиториев.
Для Korn/Bourne оболочек:
</p>
<pre>
        # cd /usr
        # CVSROOT=/cvs cvs checkout src
</pre>
<p>
Для csh и его производных: 
</p>
<pre>
        # cd /usr
        # setenv CVSROOT /cvs
        # cvs checkout src
</pre>

<p>
Вышесказанное извлечет текущее дерево исходных текстов OpenBSD. Чтобы
скопировать исходные тексты релиза OpenBSD, вы должны указать тэг в вашей
команде. Например: 
</p>
<pre>
        # cd /usr
        # cvs checkout -rOPENBSD_2_6 src
</pre>
<p>
Или <tt>OPENBSD_2_5</tt> для 2.5, и т.д.
</p>

<h3><a id="checkout" name="checkout">
<font color="#0000e0">Запуск CVSup в режиме извлечения</font></a></h3>

<p>
В качестве альтернативы CVS, для получения исходных текстов, вы можете
использовать CVSup в режиме извлечения, добавляя <tt>тэг</tt> или <tt>дату</tt>
к вашему файлу конфигурации. Вы так же можете использовать CVSup для обновления
исходных текстов и дерева портов, поставляемых на <a href="orders.html">CD диске</a>.
</p>
<p>
Пример файла конфигурации: 
</p>
<pre>
        # Defaults that apply to all the collections
        *default host=cvsup.uk.openbsd.org
        *default base=/var
        *default prefix=/usr
        *default release=cvs
        *default delete use-rel-suffix compress

        # Ports Collection.
        OpenBSD-ports tag=.
</pre>
<p>
Любой CVS тэг может быть использован. Одиночная точка "." означает HEAD, т.е.
текущее, находящееся в разработке дерево. Будьте внимательны при указании тега.
CVSup не может отличить правильные тэги от неправильных, попытка синхронизации
существующего дерева с указанием неправильного тега закончится неудачей и CVSup
удалит все существующие файлы.
</p>
<p>
Вы можете использовать ключевое слово <tt>date=[cc.]yy.mm.dd.hh.mm.ss</tt> для
выбора ревизии по времени. Все 17 или 19 символов должны быть указаны. Для 2000
года(и более) необходимо указывать столетие <var>cc</var>. Для более ранних
годов достаточно указать только две последние цифры <var>yy</var>. Вы можете
также объединить <tt>тэг</tt> и <tt>дату</tt>.
</p>


<h3>
<a id="CVSROOT" name="CVSROOT"><font color="#0000e0">Доступные CVSup сервера</font></a>
</h3>

<p>Доступные CVSup сервера:</p>

<dl>
<dt><a href="http://cvsup.uk.openbsd.org/"><strong>cvsup.uk.OpenBSD.org</strong>
</a></dt>
<dd><p>
Расположен в Брайтоне, Великобритания;
сервер поддерживает <a href="mailto:brian@OpenBSD.org">Brian Somers</a>.<br />
Обновляется каждые 2 часа. 
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>XFree86-4</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><strong>cvsup.de.OpenBSD.org</strong></dt>
<dd><p>
Расположен около Франкфурта на Майне, Германия;
сервер поддерживает <a href="mailto:wosch@FreeBSD.org">Wolfram Schneider</a>.<br />
Обновляется через CTM.
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><strong>cvsup.hu.OpenBSD.org</strong></dt>
<dd><p>
Расположен в Венгрии;
сервер поддерживает <a href="mailto:mohacsi@hera.ik.bme.hu">Mohacsi Janos</a>.<br />
Обновляется каждые 4 часа. 
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><a href="http://cvsup2.de.OpenBSD.org"><strong>cvsup2.de.OpenBSD.org</strong></a></dt>
<dd><p>
Расположен в Munich, Германия;
сервер поддерживает <a href="mailto:dl@leo.org">Daniel Lang</a>.<br />
Обновляется каждые 24 часа. 
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>XFree86-4</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><strong>cvsup.fr.OpenBSD.org</strong></dt>
<dd><p>
Расположен во Франции;
сервер поддерживает <a href="mailto:jch@oleane.net">Jean-Claude Christophe</a>.<br />
Обновляется каждые 12 часов. 
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><strong>cvsup.usa.OpenBSD.org</strong></dt>
<dd><p>
Расположен в West Lafayette, IN, США;
сервер поддерживает <a href="mailto:will@csociety.ecn.purdue.edu">Will Andrews</a>.<br />
Обновляется каждые 2 часа.
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>XFree86-4</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><a href="http://rouge.snu.ac.kr/cgi-bin/openbsdcvs.cgi/"><strong>cvsup.kr.OpenBSD.org</strong></a></dt>
<dd><p>
Расположен в Seoul, Корея;
сервер поддерживает <a href="mailto:redjade@atropos.snu.ac.kr">Kim Kyung-Hwan</a>.<br>
Обновляется каждые 2 часа.
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>XFree86-4</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><a href="http://cvsup.no.OpenBSD.org/"><strong>cvsup.no.OpenBSD.org</strong></a></dt>
<dd><p>
Расположен в Norwegian Internet eXchange, Норвегия;
сервер поддерживает <a href="mailto:anders@fix.no">Anders Nordby</a>.<br>
Обновляется каждые 2 часа.
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>XFree86-4</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<dl>
<dt><strong>cvsup.pt.OpenBSD.org</strong></dt>
<dd><p>
Расположен в университете Coimbra, Португалия;
сервер поддерживает <a href="mailto:jpedras@webvolution.net">Joao Pedras</a>.<br>
Обновляется каждые 3 часа.
Updated every 3 hours.
</p>
<p>
Доступные репозитории:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>src</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>ports</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>www</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>XFree86-3</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>XFree86-4</b> репозиторий</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-all</strong></td>
    <td>- все OpenBSD репозитории</td></tr>
</table>
</dd>
</dl>

<p>
<em>Обратите внимание:</em> Если ваш сервер перечислен здесь с неточной или
неполной информацией, пожалуйста свяжитесь с <a href="mailto:beck@openbsd.org"><tt>beck@openbsd.org</tt></a>
или <a href="mailto:brian@openbsd.org"><tt>brian@openbsd.org</tt></a>
</p>
<p>
Вы можете использовать утилиту <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=traceroute&sektion=8&format=html">traceroute(8)</a>, чтобы
определить какой сервер находится ближе к вам. При возникновении проблем
с сервером свяжитесь с поддерживающим его персоналом.
</p>
<p>
В настоящее время (с 17 мая, 2001), размеры CVS репозитория таковы:
</p>
<table>
<tr><td width="20"></td>
    <td><strong>OpenBSD-ports</strong></td>
    <td>- <b>55</b>MB</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-src</strong></td>
    <td>- <b>724</b>MB</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-www</strong></td>
    <td>- <b>42</b>MB</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-x11</strong></td>
    <td>- <b>193</b>MB</td></tr>
<tr><td></td>
    <td><strong>OpenBSD-xf4</strong></td>
    <td>- <b>271</b>MB</td></tr>
</table>
<p>
Должно быть, еще дополнительно около <strong>31</strong>MB для CVSROOT и sup
каталогов. Суммарный размер репозитория увеличивается примерно на
<strong>170</strong>MB в год.
</p>
<p>
<strong>ВАЖНОЕ ПРИМЕЧАНИЕ:</strong> имеется несколько ограничений,
касающихся криптографического программного обеспечения, которые
вы должны знать: 
</p>
<ul>
  <li>
    <p>
    Родина OpenBSD - Канада. Согласно
    <a href="http://insight.mcmaster.ca/org/efc/pages/doc/crypto-export.html">
    исследованиям</a>, проведенным гражданином Канады
    , и как значится в <a href="http://axion.physics.ubc.ca/ECL.html">
    списке контроля над экспортом Канады</a>,
    экспортировать криптографическое ПО в остальной мир РАЗРЕШЕНО.
    </p>
  </li>
  <li>
    <p>
    Но, если вы находитесь вне США или Канады, вы не должны использовать
    криптографические секции OpenBSD с анонимных CVS серверов расположенных в США.
    Рассматриваемые файлы...
    </p>
    <ul>
      <li><tt>src/kerberosIV/*</tt></li>
      <li><tt>src/lib/libdes/*</tt></li>
      <li><tt>src/lib/libc/crypt/crypt.c</tt></li>
      <li><tt>src/lib/libc/crypt/morecrypt.c</tt></li>
      <li><tt>src/sys/netinet</tt></li>
      <li><tt>src/usr.sbin/afs/src/rxkad/*</tt></li>
      <li><tt>X11/xc/lib/Xdmcp/Wraphelp.c</tt></li>
    </ul>
    <p>
    Криптографическое ПО из США может экспортироваться только в Канаду.
    </p>
  </li>
</ul>

<p>
Проект OpenBSD нуждается в дополнительных CVSup серверах, если вы можете помочь,
пожалуйста, свяжитесь с <a href="mailto:brian@OpenBSD.org">Brian Somers</a>.
</p>

<hr />
<a href="index.html"><img height="24" width="24" src="../images/back.gif" border="0" alt="OpenBSD" /></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br />
<small>
Originally [OpenBSD: cvsup.html,v 1.34 2001/03/02 14:19:51 brian Exp]<br>
$RuOBSD: cvsup.html,v 1.4 2001/03/30 15:34:19 dfa Exp $<br>
$Translation$<br>
$OpenBSD$
</small>

</body>
</html>
