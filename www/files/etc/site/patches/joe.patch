$RuOBSD: joe.patch,v 1.4 2008/10/01 21:53:12 form Exp $

--- utf8.c.orig	Sun Mar 18 10:24:23 2007
+++ utf8.c	Sun Mar 18 10:24:37 2007
@@ -345,12 +345,8 @@
 	unsigned char *s, *t, *u;
 
 	s=(unsigned char *)getenv("LC_ALL");
-	if (!s) {
-		s=(unsigned char *)getenv("LC_CTYPE");
-		if (!s) {
-			s=(unsigned char *)getenv("LANG");
-		}
-	}
+	if (!s)
+		s=(unsigned char *)getenv("LANG");
 
 	if (s)
 		s=zdup(s);
--- rc/ftyperc.orig	Thu Jul 20 22:35:56 2006
+++ rc/ftyperc	Thu Jan 15 05:42:00 2009
@@ -1,12 +1,5 @@
  File Type table.  This is :included by the joerc file.
 
- No '.' in file name?  Assume it's a text file and we want wordwrap on.
-*
--wordwrap
-
- File name with '.'?  It's probably not a text file.
-*.*
-
  Diff
 *
 +--- 
@@ -22,145 +15,98 @@
 
  Troff
 *.1
--wordwrap
 -syntax troff
 
 *.1.in
--wordwrap
 -syntax troff
 
  TeX
 *.tex
--wordwrap
 -syntax tex
 
 *.sty
--wordwrap
 -syntax tex
 
- Text file.
-*.txt
--wordwrap
-
  News/mail files.
 *.article*
--wordwrap
 -syntax mail
 
 *.followup
--wordwrap
 -syntax mail
 
 *.letter
--wordwrap
 -syntax mail
 
  NN newsreader
 *tmp/nn.*
--wordwrap
 -syntax mail
 
  mail
 *tmp/Re*
--wordwrap
 -syntax mail
 
  elm
 *tmp/snd.*
--wordwrap
 -syntax mail
 
  dmail
 *tmp/dmt*
--wordwrap
 -syntax mail
 
  pine
 *tmp/pico.*
--wordwrap
 -syntax mail
 
  Assembly language
 *.asm
--wordwrap
 -syntax asm
 
 *.s
--wordwrap
 -syntax asm
 
 *.S
--wordwrap
 -syntax asm
 
  Mason
 *.mas
--autoindent
 -syntax mason
--smarthome
--smartbacks
 
  SML
 *.sml
--autoindent
 -syntax sml
--smarthome
--smartbacks
--istep 2
 
  OCaml lanaguage file
 *.ml
--autoindent
 -syntax ocaml
--smarthome
--smartbacks
--istep 2
 
  OCaml language interface
 *.mli
--autoindent
 -syntax ocaml
--smarthome
--smartbacks
--istep 2
 
  Ruby
 *.rb
--autoindent
 -syntax ruby
 
  Perl
 *
 +#!\+\[ 	]\+\[a-z/]/perl\>
--autoindent
 -syntax perl
--smarthome
--smartbacks
 -pound_comment
 -single_quoted
 
 *.pl
--autoindent
 -syntax perl
--smarthome
--smartbacks
 -pound_comment
 -single_quoted
 
 *.pm
--autoindent
 -syntax perl
--smarthome
--smartbacks
 -pound_comment
 -single_quoted
 
  SQL file
 *.sql
--autoindent
 -syntax sql
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -171,19 +117,13 @@
 
  AWK language file
 *.awk
--autoindent
 -syntax awk
--smarthome
--smartbacks
 -purify
 -pound_comment
 
  YACC
 *.y
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -193,10 +133,7 @@
 
  LEX
 *.l
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -205,10 +142,7 @@
 -cpara >#!;*/%
 
 *.lex
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -219,20 +153,12 @@
  ADA
 *.adb
 -syntax ada
--autoindent
--istep 2
--smarthome
--smartbacks
 -purify
 -vhdl_comment
 -text_delimiters declare|Declare|DECLARE|exception|Exception|EXCEPTION|if|If|IF|loop|Loop|LOOP|case|Case|CASE|package|Package|PACKAGE|procedure|Procedure|PROCEDURE|record|Record|RECORD|function|Function|FUNCTION=end|End|END
 
 *.ads
 -syntax ada
--autoindent
--istep 2
--smarthome
--smartbacks
 -purify
 -vhdl_comment
 -text_delimiters declare|Declare|DECLARE|exception|Exception|EXCEPTION|if|If|IF|loop|Loop|LOOP|case|Case|CASE|package|Package|PACKAGE|procedure|Procedure|PROCEDURE|record|Record|RECORD|function|Function|FUNCTION=end|End|END
@@ -247,16 +173,13 @@
  REXX
 *.rex
 -syntax rexx
--autoindent
 
 *.REX
 -syntax rexx
--autoindent
 
 *
 +#!\+\[ 	]\+\[a-z/]/rxx\>
 -syntax rexx
--autoindent
 
  sed
 *.sed
@@ -271,10 +194,7 @@
 
  C language file
 *.c
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -283,10 +203,7 @@
 -cpara >#!;*/%
 
 *.cpp
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -295,10 +212,7 @@
 -cpara >#!;*/%
 
 *.cc
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -307,10 +221,7 @@
 -cpara >#!;*/%
 
 *.c++
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -320,10 +231,7 @@
 
  C language header file
 *.h
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -332,10 +240,7 @@
 -cpara >#!;*/%
 
 *.h.in
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -344,10 +249,7 @@
 -cpara >#!;*/%
 
 *.hpp
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -356,10 +258,7 @@
 -cpara >#!;*/%
 
 *.h++
--autoindent
 -syntax c
--smarthome
--smartbacks
 -purify
 -single_quoted
 -c_comment
@@ -369,11 +268,7 @@
 
  Verilog file
 *.v
--autoindent
 -syntax verilog
--istep 2
--smarthome
--smartbacks
 -purify
 -c_comment
 -cpp_comment
@@ -382,11 +277,7 @@
 
  Verilog header file
 *.vh
--autoindent
 -syntax verilog
--istep 2
--smarthome
--smartbacks
 -purify
 -c_comment
 -cpp_comment
@@ -395,126 +286,92 @@
 
  VHDL file
 *.vhd
--autoindent
 -syntax vhdl
--istep 2
--smarthome
--smartbacks
 -purify
 -vhdl_comment
 -text_delimiters entity|ENTITY|if|IF|component|COMPONENT|loop|LOOP|configuration|CONFIGURATION|units|UNITS|record|RECORD|case|CASE|function|FUNCTION|package|PACKAGE|architecture|ARCHITECTURE|block|BLOCK|process|PROCESS|generate|GENERATE=end|END
 
  XML
 *.xml
--wordwrap
--autoindent
 -syntax xml
 
  XML
 *.xsd
--wordwrap
--autoindent
 -syntax xml
 
  HTML
 *.htm
--wordwrap
--autoindent
 -syntax html
 
 *.html
--wordwrap
--autoindent
 -syntax html
 
  JAVA
 *.java
--autoindent
 -syntax java
--smarthome
--smartbacks
 -purify
 -cpara >#!;*/%
 
  Hypertext preprocessor file
 *.php
--autoindent
 -syntax php
--smarthome
--smartbacks
 -purify
 
  Python
 *
 +#!\+\[ 	]\+\[a-z/]/python\>
--autoindent
 -syntax python
--smarthome
--smartbacks
 -purify
 
 *.py
--autoindent
 -syntax python
--smarthome
--smartbacks
 -purify
 
  CSH
 *
 +#!\+\[ 	]\+\[a-z/]/csh\>
--autoindent
 -syntax csh
 -pound_comment
 
 *.csh
--autoindent
 -syntax csh
 -pound_comment
 
 *.login
--autoindent
 -syntax csh
 -pound_comment
 
 *.logout
--autoindent
 -syntax csh
 -pound_comment
 
  TCSH
 *
 +#!\+\[ 	]\+\[a-z/]/tcsh\>
--autoindent
 -syntax csh
 -pound_comment
 
 *.tcsh
--autoindent
 -syntax csh
 -pound_comment
 
 *.tcshrc
--autoindent
 -syntax csh
 -pound_comment
 
  Shell
 *
 +#!\+\[ 	]\+\[a-z/]/sh\>
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
 *.sh
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
 *profile
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
@@ -522,153 +379,120 @@
  BASH Shell
 *
 +#!\+\[ 	]\+\[a-z/]/bash\>
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
 *.bash
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
 *.bash_login
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
 *.bash_logout
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
  LISP
 *.lisp
--autoindent
 -syntax lisp
 -semi_comment
 
 *.lsp
--autoindent
 -syntax lisp
 -semi_comment
 
 *.el
--autoindent
 -syntax lisp
 -semi_comment
 
  KSH
 *
 +#!\+\[ 	]\+\[a-z/]/ksh\>
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
 *.ksh
--autoindent
 -syntax sh
 -pound_comment
 -text_delimiters do=done:if=elif=else=fi:case=esac
 
  Makefile
 *akefile
--autoindent
 -syntax conf
 -pound_comment
 
 *akefile.in
--autoindent
 -syntax conf
 -pound_comment
 
 *AKEFILE
--autoindent
 -syntax conf
 -pound_comment
 
  Pascal
 *.p
--autoindent
 -syntax pascal
--smarthome
--smartbacks
 -purify
 -text_delimiters begin|BEGIN|record|RECORD|case|CASE=end|END:repeat|REPEAT=until|UNTIL
 
 *.pas
--autoindent
 -syntax pascal
--smarthome
--smartbacks
 -purify
 -text_delimiters begin|BEGIN|record|RECORD|case|CASE=end|END:repeat|REPEAT=until|UNTIL
 
  Fortran
 *.f
--autoindent
 -syntax fortran
 
 *.for
--autoindent
 -syntax fortran
 
 *.FOR
--autoindent
 -syntax fortran
 
  Cadence SKILL
 *.il
 -semi_comment
 -syntax skill
--autoindent
--istep 3
 -indentc 32
--smartbacks
--smarthome
 -indentfirst
 
  LUA
 *.lua
--autoindent
 -syntax lua
 
  TCL
 *.tcl
--autoindent
 -syntax tcl
 
  Joe Syntax File
 *.jsf
--autoindent
 -syntax conf
 
 *.jsf.in
--autoindent
 -syntax conf
 
  Autoconfig file
 *.ac
--autoindent
 -syntax m4
 
  M4 file
 *.m4
--autoindent
 -syntax m4
 
  Automake file
 *.am
--autoindent
 -syntax conf
 
  Mail file
 *tmp/mutt-*
--wordwrap
 -syntax mail
 
  System RC file
--- rc/joerc.in.orig	Sun Sep 30 11:20:35 2007
+++ rc/joerc.in	Sun Sep 30 11:21:43 2007
@@ -57,18 +57,18 @@
 
  -marking	Text between ^KB and cursor is highlighted (use with -lightoff)
 
- -asis		Characters 128 - 255 shown as-is
+-asis		Characters 128 - 255 shown as-is
 
  -force		Force final newline when files are saved
 
- -nolocks	If you don't want file locks to be used
+-nolocks	If you don't want file locks to be used
 
  -nomodcheck	Disable periodic checking of disk file newer than buffer
 		(this checking happens on save even with this option).
 
  -nocurdir	Do not prompt with current directory
 
- -nobackups	If you don't want backup files to be created
+-nobackups	If you don't want backup files to be created
 
  -break_links	Delete file before writing, to break hard links
 
@@ -116,7 +116,7 @@
 
  -skiptop nnn	Don't use top nnn lines of the screen
 
--notite         Don't send terminal initialization and termination strings:
+ -notite        Don't send terminal initialization and termination strings:
                 prevents restoration of screen on exit.
 
  -usetabs       Use tabs to help optimize screen update.
@@ -155,7 +155,7 @@
 
  -autoswap	Swap markb with markk when necessary
 
--joe_state     Use ~/.joe_state file
+ -joe_state     Use ~/.joe_state file
 
  -mouse		Enable xterm mouse support.  When enabled, left-click will
 		position the cursor and left-click-drag will select blocks
@@ -347,7 +347,7 @@
 
  Default local options
 -highlight
--istep 2
+ -istep 2
 
  Perforce macro: use this macro (put in first column) to have joe "p4 edit"
  a file you're about to change.
