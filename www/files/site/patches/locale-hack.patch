$RuOBSD$

--- ctype_.c.orig	Sun Jan 11 22:57:58 2004
+++ ctype_.c	Sun Jan 11 23:01:23 2004
@@ -68,18 +68,18 @@
 	_C,	_C|_S,	_C|_S,	_C|_S,	_C|_S,	_C|_S,	_C,	_C, /* 88 */
 	_C,	_C,	_C,	_C,	_C,	_C,	_C,	_C, /* 90 */
 	_C,	_C,	_C,	_C,	_C,	_C,	_C,	_C, /* 98 */
-   _S|(char)_B,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* A0 */
+   _S|(char)_B,	_P,	_P,	_L,	_P,	_P,	_P,	_P, /* A0 */
 	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* A8 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* B0 */
+	_P,	_P,	_P,	_U,	_P,	_P,	_P,	_P, /* B0 */
 	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* B8 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* C0 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* C8 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* D0 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* D8 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* E0 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* E8 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P, /* F0 */
-	_P,	_P,	_P,	_P,	_P,	_P,	_P,	_P  /* F8 */
+	_L,	_L,	_L,	_L,	_L,	_L,	_L,	_L, /* C0 */
+	_L,	_L,	_L,	_L,	_L,	_L,	_L,	_L, /* C8 */
+	_L,	_L,	_L,	_L,	_L,	_L,	_L,	_L, /* D0 */
+	_L,	_L,	_L,	_L,	_L,	_L,	_L,	_L, /* D8 */
+	_U,	_U,	_U,	_U,	_U,	_U,	_U,	_U, /* E0 */
+	_U,	_U,	_U,	_U,	_U,	_U,	_U,	_U, /* E8 */
+	_U,	_U,	_U,	_U,	_U,	_U,	_U,	_U, /* F0 */
+	_U,	_U,	_U,	_U,	_U,	_U,	_U,	_U  /* F8 */
 #endif /*USE7BIT*/
 };
 
--- tolower_.c.orig	Sun Jan 11 23:02:49 2004
+++ tolower_.c	Sun Jan 11 23:03:45 2004
@@ -35,16 +35,16 @@
 	0x98,	0x99,	0x9a,	0x9b,	0x9c,	0x9d,	0x9e,	0x9f,
 	0xa0,	0xa1,	0xa2,	0xa3,	0xa4,	0xa5,	0xa6,	0xa7,
 	0xa8,	0xa9,	0xaa,	0xab,	0xac,	0xad,	0xae,	0xaf,
-	0xb0,	0xb1,	0xb2,	0xb3,	0xb4,	0xb5,	0xb6,	0xb7,
+	0xb0,	0xb1,	0xb2,	0xa3,	0xb4,	0xb5,	0xb6,	0xb7,
 	0xb8,	0xb9,	0xba,	0xbb,	0xbc,	0xbd,	0xbe,	0xbf,
 	0xc0,	0xc1,	0xc2,	0xc3,	0xc4,	0xc5,	0xc6,	0xc7,
 	0xc8,	0xc9,	0xca,	0xcb,	0xcc,	0xcd,	0xce,	0xcf,
 	0xd0,	0xd1,	0xd2,	0xd3,	0xd4,	0xd5,	0xd6,	0xd7,
 	0xd8,	0xd9,	0xda,	0xdb,	0xdc,	0xdd,	0xde,	0xdf,
-	0xe0,	0xe1,	0xe2,	0xe3,	0xe4,	0xe5,	0xe6,	0xe7,
-	0xe8,	0xe9,	0xea,	0xeb,	0xec,	0xed,	0xee,	0xef,
-	0xf0,	0xf1,	0xf2,	0xf3,	0xf4,	0xf5,	0xf6,	0xf7,
-	0xf8,	0xf9,	0xfa,	0xfb,	0xfc,	0xfd,	0xfe,	0xff
+	0x80,	0x81,	0x82,	0x83,	0x84,	0x85,	0x86,	0x87,
+	0x88,	0x89,	0x8a,	0x8b,	0x8c,	0x8d,	0x8e,	0x8f,
+	0x90,	0x91,	0x92,	0x93,	0x94,	0x95,	0x96,	0x97,
+	0x98,	0x99,	0x9a,	0x9b,	0x9c,	0x9d,	0x9e,	0x9f
 };
 
 const short *_tolower_tab_ = _C_tolower_;
--- toupper_.c.orig	Sun Jan 11 23:01:41 2004
+++ toupper_.c	Sun Jan 11 23:02:43 2004
@@ -29,11 +29,11 @@
 	'H',	'I',	'J',	'K',	'L',	'M',	'N',	'O',
 	'P',	'Q',	'R',	'S',	'T',	'U',	'V',	'W',
 	'X',	'Y',	'Z',	0x7b,	0x7c,	0x7d,	0x7e,	0x7f,
-	0x80,	0x81,	0x82,	0x83,	0x84,	0x85,	0x86,	0x87,
-	0x88,	0x89,	0x8a,	0x8b,	0x8c,	0x8d,	0x8e,	0x8f,
-	0x90,	0x91,	0x92,	0x93,	0x94,	0x95,	0x96,	0x97,
-	0x98,	0x99,	0x9a,	0x9b,	0x9c,	0x9d,	0x9e,	0x9f,
-	0xa0,	0xa1,	0xa2,	0xa3,	0xa4,	0xa5,	0xa6,	0xa7,
+	0xe0,	0xe1,	0xe2,	0xe3,	0xe4,	0xe5,	0xe6,	0xe7,
+	0xe8,	0xe9,	0xea,	0xeb,	0xec,	0xed,	0xee,	0xef,
+	0xf0,	0xf1,	0xf2,	0xf3,	0xf4,	0xf5,	0xf6,	0xf7,
+	0xf8,	0xf9,	0xfa,	0xfb,	0xfc,	0xfd,	0xfe,	0xff,
+	0xa0,	0xa1,	0xa2,	0xb3,	0xa4,	0xa5,	0xa6,	0xa7,
 	0xa8,	0xa9,	0xaa,	0xab,	0xac,	0xad,	0xae,	0xaf,
 	0xb0,	0xb1,	0xb2,	0xb3,	0xb4,	0xb5,	0xb6,	0xb7,
 	0xb8,	0xb9,	0xba,	0xbb,	0xbc,	0xbd,	0xbe,	0xbf,
--- setlocale.c.orig	Sun Jan 11 22:44:50 2004
+++ setlocale.c	Sun Jan 11 23:05:17 2004
@@ -63,10 +63,10 @@
 static char current_categories[_LC_LAST][32] = {
     "C",
     "C",
+    "ru_RU.KOI8-R",
     "C",
     "C",
     "C",
-    "C",
     "C"
 };
 
@@ -209,7 +209,8 @@
 	    current_categories[category]) == 0)
 		return (current_categories[category]);
 
-	if (!strcmp(new_categories[category], "C") ||
+	if (!strcmp(new_categories[category], "ru_RU.KOI8-R") ||
+	    !strcmp(new_categories[category], "C") ||
 	    !strcmp(new_categories[category], "POSIX")) {
 
 		/*
@@ -261,9 +262,9 @@
 	if (!env || !*env)
 		env = getenv("LANG");
 
-	/* 4. if none is set, fall to "C" */
+	/* 4. if none is set, fall to "ru_RU.KOI8-R" */
 	if (!env || !*env || strchr(env, '/'))
-		env = "C";
+		env = "ru_RU.KOI8-R";
 
 	return env;
 }
