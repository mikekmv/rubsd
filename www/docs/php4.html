<!--#set var="DOC_TITLE" value="Устанавливаем PHP4" -->
<!--#include virtual="doc_header.html" -->

<p>Вы можете установить <code>php</code> из коллекции пакетов, при этом
выберите пакет php который более соответствует вашим требованиям, т.е. с
нужными для вас flavor-ами. Возможно, вам придется установить другие пакеты
для удовлетворения зависимостей или устанавливайте прямо с ftp, например.</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
# pkg_add ftp://ftp.openbsd.org/pub/OpenBSD/2.9/packages/i386/php4-4.0.6-flavor.tgz
</pre>
</td></tr>
</table>

<p>Если же вам, нужна более гибкая настройка <code>php</code>, вы можете
использовать дерево портов. Я изменил <strong>Makefile</strong> порта
следующим образом, добавив эти строки к CONFIGURE_ARGS порта:</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#c9c9ff">
<pre>
--enable-magic-quotes
--enable-sockets 
--enable-memory-limit 
--enable-debug=no
</pre>
</td></tr>
</table>

<p>Прежде всего, обратите внимание на flavor-ы, с которыми вы будите собирать
<code>php</code>! Это можно сделать следующим образом:
</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
$ cd /usr/ports/www/php4
$ make show VARNAME=FLAVORS
</pre>
</td></tr>
</table>

<p>
При этом, возможно, в процессе установки, добавятся
дополнительные пакеты, для удовлетворения зависимостей к заданным flavor-ам.
Итак, делаем:</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
# cd /usr/ports/www/php4
# env FLAVORS="mysql imap gettext pdflib" make install
</pre>
</td></tr>
</table>

<p>По окончанию установки, вам необходимо подключить модуль
<code>php4</code> с помощью команд:</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
# /usr/local/sbin/php4-enable
# cp /usr/local/share/doc/php4/php.ini-dist /var/www/conf/php.ini 
# echo '&lt;?php php_info() ?&gt;' &gt; /var/www/htdocs/test.php
</pre>
</td></tr>
</table>

<p>Изменим <font color="#00a000">httpd.conf</font>, добавив/раскомментировав
следующие строчки (php3 выставляется для совместимости со старыми скриптами):
</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#c9c9ff">
<pre>
# AddType allows you to tweak mime.types without actually editing it, or to
# make certain files to be certain types.
<font color="#0000a0">
AddType application/x-httpd-php .phtml
AddType application/x-httpd-php-source .phps 
AddType application/x-httpd-php .php
AddType application/x-httpd-php .php3
</font>

# Add to the Directory Index the php extensions
<font color="#0000a0">
DirectoryIndex index.html index.htm index.php3 index.php index.phtml 
</font></pre>
</td></tr>
</table>

<p>Пробуем перезапустить <code>httpd</code> и смотрим полученные результаты:</p>

<table border="0" width="600" align="center" cellpadding="15" cellspacing="0">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
# apachectl restart
# lynx http://localhost/test.php
</pre>
</td></tr>
</table>

<p>В результате, мы должны получить информацию о работе модуля <code>php</code>
и <code>apache</code>.</p>

<p><hr>
<a href="index.html"><img height="24" width="24" src="../images/back.gif"
border="0" alt="OpenBSD.ru"></a>
<a href="mailto:www@openbsd.ru">www@openbsd.ru</a><br>
<small>$RuOBSD: php4.html,v 1.6 2001/12/27 07:27:50 null Exp $</small>

</body>
</html>
