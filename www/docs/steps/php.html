<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
<meta http-equiv="Content-Language" content="ru">
<meta name="copyright" content="Copyright (c) 2000-2005 by OpenBSD.ru">   
<title>Apache: Устанавливаем PHP</title>
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<h2><font color="#e00000">Apache: Устанавливаем PHP</font></h2>
<hr>

<h3><font color="#0000e0">Мини-руководство "шаг за шагом"</font></h3>

<p>
<table border=0>
<tr><td nowrap bgcolor="#EEEEEE">

<blockquote><pre>

Через переменную окружения указываем путь к прекомпилированным пакетам:

# <strong>export PKG_PATH=ftp://ftp.openbsd.org/pub/OpenBSD/snapshots/packages/`arch -s`/</strong>

Устанавливаем базовый пакет PHP4:

# <strong>pkg_add php4-core-4.4.0p0.tgz</strong>

С помощью команды phpxs активируем модуль libphp4.so:

# <strong>/usr/local/sbin/phpxs -s</strong>

Воспользуемся рекомендованной разработчиками версией php.ini:

# <strong>cp /usr/local/share/examples/php4/php.ini-recommended /var/www/conf/php.ini</strong>

Выставляем корректные права доступа для php.ini:

# <strong>chown root:www /var/www/conf/php.ini</strong>
# <strong>chmod 640 /var/www/conf/php.ini</strong>

Следующие строки в главном конфигурационном файле Apache должны быть раскомментированы:

# <strong>vi /var/www/conf/httpd.conf</strong>
LoadModule php4_module /usr/lib/apache/modules/libphp4.so
DirectoryIndex index.html index.php
AddType application/x-httpd-php .php

Устанавливаем набор классов PHP4 общего назначения:

# <strong>pkg_add php4-pear-4.4.0.tgz</strong>

Устанавливаем специальное расширение для поддержки MySQL:

# <strong>pkg_add php4-mysql-4.4.0p0.tgz</strong>

Активируем модуль php4-mysql:

# <strong>/usr/local/sbin/phpxs -a mysql</strong>

Устанавливаем специальное расширение для поддержки IMAP:

# <strong>pkg_add php4-imap-4.4.0p0.tgz</strong>

Активируем модуль php4-imap:

# <strong>/usr/local/sbin/phpxs -a imap</strong>

Чтобы проверить работу модуля PHP4, создаем файл test.php:

# <strong>echo '&lt;?php phpinfo() ?&gt;' &gt; /var/www/htdocs/test.php</strong>

Выполняем останов и повторный запуск httpd(8):

# <strong>apachectl stop</strong>
# <strong>apachectl start</strong>

Вот так можно получить информацию о совместной работе PHP и Apache:

% <strong>lynx http://localhost/test.php</strong>
</blockquote></pre>

</td></tr>
</table>

<p>
<hr>
<a href="index.html"><img height=24 width=24 src="../../images/back.gif" border=0 alt="OpenBSD.ru"></a>
<a href="mailto:www@openbsd.ru">www@openbsd.ru</a>
<br>
<small>$RuOBSD$</small>

</body>
</html>
