$RuOBSD$
--- fam/Listener.c++.orig	2002-07-16 13:14:41.000000000 +0700
+++ fam/Listener.c++	2004-01-15 19:54:10.000000000 +0600
@@ -22,6 +22,8 @@
 
 #include "Listener.h"
 
+#include <stdio.h>
+#include <stdlib.h>
 #include <assert.h>
 #include <fcntl.h>
 #include <sys/types.h>
@@ -32,6 +34,7 @@
 #include <rpc/clnt.h>
 #include <sys/ioctl.h>
 #include <sys/socket.h>
+#include <sys/param.h>
 #include <sys/stat.h>
 #include <sys/un.h>
 #include <unistd.h>
@@ -205,7 +208,7 @@ Listener::create_local_client(TCP_Client
     unsetenv("TMPDIR");
 
     char *tmpfile = tempnam("/tmp", ".fam");
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__NetBSD__)
     sockaddr_un sun = { sizeof(sockaddr_un), AF_UNIX, "" };
 #else
     sockaddr_un sun = { AF_UNIX, "" };
@@ -279,7 +282,7 @@ Listener::accept_localclient(int ofd, vo
 
     // Get the new socket.
 
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__NetBSD__)
     struct sockaddr_un sun = { sizeof(sockaddr_un), AF_UNIX, "" };
 #else
     struct sockaddr_un sun = { AF_UNIX, "" };
@@ -345,7 +348,7 @@ Listener::accept_localclient(int ofd, vo
 void
 Listener::dirty_ugly_hack()
 {
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__NetBSD__)
     static sockaddr_un sun = { sizeof (sockaddr_un), AF_UNIX, "/tmp/.fam_socket" };
 #else
     static sockaddr_un sun = { AF_UNIX, "/tmp/.fam_socket" };
