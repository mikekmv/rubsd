$RuOBSD$
--- src/Makefile.in.orig	Thu Jan  3 09:25:52 2002
+++ src/Makefile.in	Tue Apr 23 23:49:07 2002
@@ -19,7 +19,7 @@ CFLAGS = @CFLAGS@ -I.. -I$(top_srcdir) @
 CPPFLAGS = @CPPFLAGS@
 
 eggdrop_objs = bg.o botcmd.o botmsg.o botnet.o chanprog.o cmds.o dcc.o \
-dccutil.o dns.o flags.o language.o main.o mem.o misc.o misc_file.o \
+dccutil.o dns.o flags.o language.o eggdrop.o mem.o misc.o misc_file.o \
 modules.o net.o rfc1459.o tcl.o tcldcc.o tclhash.o tclmisc.o \
 tcluser.o userent.o userrec.o users.o
 
@@ -53,11 +53,11 @@ clean:
 build_msg:
 	@echo "(This may take a while.  Go get some runts.)"
 
-main.o:
+eggdrop.o:
 	$(CC) $(CFLAGS) $(CPPFLAGS) \
 '-DCCFLAGS="$(CC) $(CFLAGS) $(CPPFLAGS)"' \
 '-DLDFLAGS="$(LD)"' \
-'-DSTRIPFLAGS="$(STRIP)"' -c $(srcdir)/main.c
+'-DSTRIPFLAGS="$(STRIP)"' -c $(srcdir)/eggdrop.c
 
 compatability:
 	@cd compat && $(MAKE_GENERIC) compat
@@ -73,7 +73,7 @@ libtcle.a: $(TCLLIB)/lib$(TCLLIBFN)
 	ar d libtcle.a tclMain.o
 	$(RANLIB) libtcle.a
 
-eggdrop.h:
+eggdrop_env.h:
 	@echo "You do not have the eggdrop source!"
 	@exit 1
 
@@ -84,130 +84,130 @@ eggdrop.h:
 	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<
 
 #safety hash
-bg.o: ./bg.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+bg.o: ./bg.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  bg.h
-botcmd.o: ./botcmd.c main.h ../config.h lang.h eggdrop.h flags.h \
+botcmd.o: ./botcmd.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h tandem.h modules.h mod/modvals.h
-botmsg.o: ./botmsg.c main.h ../config.h lang.h eggdrop.h flags.h \
+botmsg.o: ./botmsg.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h tandem.h
-botnet.o: ./botnet.c main.h ../config.h lang.h eggdrop.h flags.h \
+botnet.o: ./botnet.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h tandem.h
-chanprog.o: ./chanprog.c main.h ../config.h lang.h eggdrop.h flags.h \
+chanprog.o: ./chanprog.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h modules.h mod/modvals.h
-cmds.o: ./cmds.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+cmds.o: ./cmds.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  tandem.h modules.h mod/modvals.h
-dcc.o: ./dcc.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+dcc.o: ./dcc.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  modules.h mod/modvals.h tandem.h md5/md5.h
-dccutil.o: ./dccutil.c main.h ../config.h lang.h eggdrop.h flags.h \
+dccutil.o: ./dccutil.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h modules.h mod/modvals.h tandem.h
-dns.o: ./dns.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+dns.o: ./dns.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  dns.h
-flags.o: ./flags.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+flags.o: ./flags.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h
-language.o: ./language.c main.h ../config.h lang.h eggdrop.h flags.h \
+language.o: ./language.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h
-main.o: ./main.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+eggdrop.o: ./main.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  modules.h mod/modvals.h tandem.h bg.h patch.h
 match.o: ./match.c
-mem.o: ./mem.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+mem.o: ./mem.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  mod/modvals.h
-misc.o: ./misc.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+misc.o: ./misc.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
  stat.h
-misc_file.o: ./misc_file.c main.h ../config.h lang.h eggdrop.h flags.h \
+misc_file.o: ./misc_file.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h stat.h
-modules.o: ./modules.c main.h ../config.h lang.h eggdrop.h flags.h \
+modules.o: ./modules.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h modules.h mod/modvals.h tandem.h
-net.o: ./net.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+net.o: ./net.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h
-rfc1459.o: ./rfc1459.c main.h ../config.h lang.h eggdrop.h flags.h \
+rfc1459.o: ./rfc1459.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h
-tcl.o: ./tcl.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+tcl.o: ./tcl.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h
-tcldcc.o: ./tcldcc.c main.h ../config.h lang.h eggdrop.h flags.h \
+tcldcc.o: ./tcldcc.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h tandem.h modules.h mod/modvals.h
-tclhash.o: ./tclhash.c main.h ../config.h lang.h eggdrop.h flags.h \
+tclhash.o: ./tclhash.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h match.c
-tclmisc.o: ./tclmisc.c main.h ../config.h lang.h eggdrop.h flags.h \
+tclmisc.o: ./tclmisc.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h modules.h mod/modvals.h tandem.h md5/md5.h
-tcluser.o: ./tcluser.c main.h ../config.h lang.h eggdrop.h flags.h \
+tcluser.o: ./tcluser.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h tandem.h
-userent.o: ./userent.c main.h ../config.h lang.h eggdrop.h flags.h \
+userent.o: ./userent.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h
-userrec.o: ./userrec.c main.h ../config.h lang.h eggdrop.h flags.h \
+userrec.o: ./userrec.c main.h ../config.h lang.h eggdrop_env.h flags.h \
  proto.h ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h \
  users.h compat/compat.h compat/inet_aton.h ../src/main.h \
  compat/snprintf.h compat/memset.h compat/memcpy.h compat/strcasecmp.h \
  compat/strftime.h modules.h mod/modvals.h tandem.h
-users.o: ./users.c main.h ../config.h lang.h eggdrop.h flags.h proto.h \
+users.o: ./users.c main.h ../config.h lang.h eggdrop_env.h flags.h proto.h \
  ../lush.h misc_file.h cmdt.h tclegg.h tclhash.h chan.h users.h \
  compat/compat.h compat/inet_aton.h ../src/main.h compat/snprintf.h \
  compat/memset.h compat/memcpy.h compat/strcasecmp.h compat/strftime.h \
